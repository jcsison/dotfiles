{"version":3,"sources":["webpack:///webpack/bootstrap d4f904c6770962e59cd8","webpack:///./src/lib/dom.js","webpack:///./src/lib/keys.js","webpack:///./node_modules/mosi/client.js","webpack:///./src/lib/browser_polyfill.js","webpack:///./src/storage/storage.js","webpack:///./src/lib/util.js","webpack:///./node_modules/mosi/node.js","webpack:///./node_modules/webextension-polyfill/dist/browser-polyfill.js","webpack:///./src/lib/friendlyCodeStrings.json","webpack:///./src/lib/url.js","webpack:///./src/options/Keybindings/trie.js","webpack:///./src/options/Keybindings/index.js","webpack:///./src/options/Appearance/index.js","webpack:///./src/storage/transform.js","webpack:///./src/options/General/index.js","webpack:///./src/options/Blacklist/index.js","webpack:///./src/storage/procedures.js","webpack:///./node_modules/compare-versions/index.js","webpack:///./src/background_page/modes.js","webpack:///./src/modes/command/background/commands/tab.js","webpack:///./src/modes/command/background/commands/clipboard.js","webpack:///./src/modes/hints/background/hintStrings.js","webpack:///./node_modules/mosi/core.js","webpack:///./src/modes/command/background/index.js","webpack:///./src/modes/hints/background/index.js","webpack:///./src/background_page/index.js"],"names":["element","root","activeElement","activeElementShadowRoot","events","type","event","view","detail","textArea","document","value","url","JSON","saveAs","fullscreenchange","s","c","a","m","_physicalKeys","_ignoreModifierKeys","physicalKeys","modifierString","code","ignoreModifierKeys","key","friendlyModifierString","friendlyShiftlessModifierString","repeat","isMac","navigator","require","storageGet","Object","options","browser","storageSet","storageRemove","storageClear","keys","object","output","Error","encodedSearchQuery","i","queryURLTemplate","protocol","protocolMatch","hasPath","isIP","e","isTLD","knownTLDs","knownProtocols","isLikeURL","JSONTrie","keySequence","validKeyboardEvent","out","bindings","addToTrie","trie","message","firstLeafValue","command1","command2","config","item","mode","keybindings","hintVerticalTranslation","translationX","hintHorizontalTranslation","hintHorizontalPlacement","translationY","hintVerticalPlacement","hintShadow","transform","errors","transforms","backgroundOptions","clientOptions","setKeyboardSettings","hintCSS","Blacklist","categories","console","msg","request","fetch","result","builtInProfiles","profiles","profile","customProfiles","activeProfiles","name","_builtInProfiles","_customProfiles","_activeProfile","newProfileName","Date","correctedOptions","newOptions","correctValue","configItem","input","reader","tabs","tab","file","runAt","matchAboutBlank","cachedClientOptions","chrome","activeTabIndex","nextTabId","previousTabId","firstTabId","lastTabId","index","nextTabIndex","tabId","zoomFactor","Math","zoomStep","muted","pinned","offset","hints","hint","defaultModeObject","onOptionsChange","messages","hintChars","autoActivateHint","findHints","currentTabTarget","hintsPerFrame","totalHints","v","hintStrings","nextOffset","processKey","results","nextMode","openLinkInIncognitoWindow","actions","sender","tabIndex","modes","Hints"],"mappings":"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","file":"background_page.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 37);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d4f904c6770962e59cd8","/**\n * Given a DOM element, returns true if you can edit it with key presses or\n * if the element is of a type that should handle its own keypresses\n * (e.g. role=application for google docs/sheets)\n * TODO: work on case sensitivity\n * consider all the possible cases\n * @param {HTMLElement} element\n * @returns {boolean}\n */\nexport function isTextEditable (element) {\n  if (element) {\n    switch (element.nodeName) {\n      case 'INPUT':\n        return isEditableHTMLInput(element)\n      case 'TEXTAREA':\n      case 'OBJECT':\n        return true\n    }\n    switch (true) {\n      case element.contentEditable.toUpperCase() === 'TRUE':\n      case element.role === 'application':\n        return true\n    }\n  }\n  return false\n}\n\n/**\n * Returns whether the passed HTML input element is editable\n * @param {HTMLInputElement} element\n */\nfunction isEditableHTMLInput (element) {\n  if (element.disabled || element.readonly) return false\n  switch (element.type) {\n    case undefined:\n    case 'text':\n    case 'search':\n    case 'email':\n    case 'url':\n    case 'number':\n    case 'password':\n    case 'date':\n    case 'tel':\n      return true\n  }\n  return false\n}\n\n/**\n * Like document.activeElement, but penetrates through Shadow DOM\n * A good example is: https://web.archive.org/web/20170621214451/https://material.io/icons/\n * Click on the input. document.activeElement is different from deepActiveElement()\n * @param {HTMLElement} root\n */\nexport function deepActiveElement (root = document) {\n  const activeElement = root.activeElement\n  const activeElementShadowRoot = activeElement && activeElement.shadowRoot\n  return activeElementShadowRoot\n    ? deepActiveElement(activeElementShadowRoot)\n    : activeElement\n}\n\n/**\n * Dispatch a mouse event to the target element\n * based on cVim's implementation\n * @param {HTMLElement} element\n * @param {'hover' | 'unhover' | 'click'} type\n * @param {{ ctrlKey, shiftKey, altKey, metaKey }} modifierKeys\n */\nexport function mouseEvent (element, type, modifierKeys = {}) {\n  let events\n  switch (type) {\n    case 'hover':\n      events = ['mouseover', 'mouseenter', 'mousemove']\n      break\n    case 'unhover':\n      events = ['mousemove', 'mouseout', 'mouseleave']\n      break\n    case 'click':\n      events = ['mouseover', 'mousedown', 'mouseup', 'click']\n      break\n  }\n  events.forEach(type => {\n    const event = new MouseEvent(type, {\n      bubbles: true,\n      cancelable: true,\n      view: window,\n      detail: 1, // usually the click count\n      ...modifierKeys\n    })\n    element.dispatchEvent(event)\n  })\n}\n\n/**\n * TODO: use standard fullscreenchange event when browsers support it\n */\nexport const fullscreenchange =\n  SAKA_PLATFORM === 'chrome'\n    ? 'webkitfullscreenchange'\n    : SAKA_PLATFORM === 'firefox' ? 'mozfullscreenchange' : 'fullscreenchange'\n/**\n * Given a DOM event type that is vendor pre-fixed, e.g. 'mozfullscreenchange',\n * converts it to a standardized event type, e.g. 'fullscreenchange'\n * TODO: remove this if no vendor-prefixed events are needed\n * @param {string} event\n * @returns {string}\n */\nexport function normalizeEventType (type) {\n  switch (type) {\n    case fullscreenchange:\n      return 'fullscreenchange'\n    default:\n      return type\n  }\n}\n\n// TODO: figure out why elements within shadow roots aren't registered as\n// visible/clickable, then start using this method\n/**\n * Given an HTML Element, returns a list of all elements within\n * penetrating the shadow DOM\n * @param {HTMLElement} root\n */\nexport function getAllElementsIncludingShadowDOM (root = document) {\n  const allElements = root.querySelectorAll('*')\n  let shadowDescendents = []\n  allElements.forEach(element => {\n    if (element.shadowRoot) {\n      shadowDescendents = [\n        ...shadowDescendents,\n        ...getAllElementsIncludingShadowDOM(element.shadowRoot)\n      ]\n    }\n  })\n  return [...allElements, shadowDescendents]\n}\n\n/**\n * Copies the specified text to the clipboard\n * @param {string} text\n */\nexport function copy (text) {\n  const textArea = document.createElement('textarea')\n  textArea.style = 'position:fixed;right:0'\n  textArea.value = text\n  document.body.appendChild(textArea)\n  textArea.select()\n  document.execCommand('Copy')\n  document.body.removeChild(textArea)\n}\n\n/**\n * Returns the clipboard contents.\n * This method is only callable from the background page and requires\n * the \"clipboardRead\" permission to be declared in manifest.json\n * @returns {string}\n */\nexport function paste () {\n  const textArea = document.createElement('textarea')\n  textArea.style = 'position:fixed;right:0'\n  document.body.appendChild(textArea)\n  textArea.focus()\n  document.execCommand('Paste')\n  const value = textArea.value\n  document.body.removeChild(textArea)\n  return value\n}\n\n/** Saves the given object to a human-readable JSON file */\nexport async function downloadJSON (object, filename) {\n  const url = URL.createObjectURL(\n    new Blob([JSON.stringify(object, null, 2)], {\n      type: 'data:application/json;charset=utf-8'\n    })\n  )\n  await browser.downloads.download({\n    url,\n    filename,\n    saveAs: true\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/dom.js","import friendlyCodeStrings from './friendlyCodeStrings.json'\n\nexport const isMac = navigator.appVersion.indexOf('Mac') !== -1\n\nlet _physicalKeys = true\nlet _ignoreModifierKeys = false\n\n/**\n * Configure how keyboard bindings should be interpreted and displayed\n * Options:\n * 1. physicalKeys = false: use event.code + modifierKeys\n * 2. physicalKeys = true && ignoreModifierKeys = false: use event.key + modifierKeys\n * 3. physicalKeys = true && ignoreModifierKeys = true: use event.key\n * @param {boolean} physicalKeys_\n * @param {boolean} ignoreModifierKeys_\n */\nexport function setKeyboardSettings (physicalKeys, ignoreModifierKeys) {\n  _physicalKeys = physicalKeys\n  _ignoreModifierKeys = ignoreModifierKeys\n}\n\n/**\n * Returns true if the given keyboard event is ONLY a modifier key, false otherwise\n * @param {KeyboardEvent} event\n * @returns {boolean}\n */\nexport function isModifierKey (event) {\n  switch (event.key) {\n    case 'Shift':\n    case 'Control':\n    case 'Alt':\n    case 'Meta':\n      return true\n    default:\n      return false\n  }\n}\n\n/**\n * Given a keyboard event, returns a string representation of its modifiers\n * @param {KeyboardEvent} event\n * @returns {string}\n */\nfunction modifierString (event) {\n  const { shiftKey: s, ctrlKey: c, altKey: a, metaKey: m } = event\n  return `${s ? 's' : ''}${c ? 'c' : ''}${a ? 'a' : ''}${m ? 'm' : ''}`\n}\n\n/**\n * Converts a KeyboardEvent to its string representation use for internal processing\n * @param {KeyboardEvent} event\n * @param {boolean} physicalKeys\n * @param {boolean} ignoreModifierKeys\n * @returns {string}\n */\nexport function keyboardEventString (\n  event,\n  physicalKeys = _physicalKeys,\n  ignoreModifierKeys = _ignoreModifierKeys\n) {\n  return physicalKeys\n    ? `${modifierString(event)}_${event.code}`\n    : ignoreModifierKeys\n      ? `${event.key}`\n      : `${modifierString(event)}_${event.key}`\n}\n\n/** Given a keyboard event, returns a string representation of its modifiers\n * @param {KeyboardEvent} event\n * @returns {string}\n */\nfunction friendlyModifierString (event) {\n  const { shiftKey: s, ctrlKey: c, altKey: a, metaKey: m } = event\n  return `${s ? 'shift-' : ''}${c ? 'ctrl-' : ''}${a ? 'alt-' : ''}${m\n    ? 'meta-'\n    : ''}`\n}\n\n/** Given a keyboard event, returns a string representation of its modifiers\n * @param {KeyboardEvent} event\n * @returns {string}\n */\nfunction friendlyShiftlessModifierString (event) {\n  const { ctrlKey: c, altKey: a, metaKey: m } = event\n  return `${c ? 'ctrl-' : ''}${a ? 'alt-' : ''}${m ? 'meta-' : ''}`\n}\n\n/** Converts a KeyboardEvent to a user-friendly string representation.\n * @param {KeyboardEvent} event\n * @param {boolean} physicalKeys\n * @param {boolean} ignoreModifierKeys\n * @returns {string}\n */\nexport function friendlyKeyboardEventString (\n  event,\n  physicalKeys = _physicalKeys,\n  ignoreModifierKeys = _ignoreModifierKeys\n) {\n  return physicalKeys\n    ? `${friendlyModifierString(event)}${friendlyCodeStrings[event.code]\n      ? friendlyCodeStrings[event.code].value\n      : event.code}`\n    : ignoreModifierKeys\n      ? `${event.key}`\n      : `${friendlyShiftlessModifierString(event)}${event.key}`\n}\n\n/**\n * Returns whether a (possibly user-defined) keyboard event is valid\n * @param {KeyboardEvent} event\n * @returns {boolean}\n */\nexport function validKeyboardEvent (event) {\n  return (\n    event &&\n    event.key &&\n    typeof event.key === 'string' &&\n    event.code &&\n    typeof event.code === 'string' &&\n    (!event.hasOwnProperty('shiftKey') ||\n      (event.shiftKey && typeof event.shiftKey === 'boolean')) &&\n    (!event.hasOwnProperty('ctrlKey') ||\n      (event.ctrlKey && typeof event.ctrlKey === 'boolean')) &&\n    (!event.hasOwnProperty('altKey') ||\n      (event.altKey && typeof event.altKey === 'boolean')) &&\n    (!event.hasOwnProperty('metaKey') ||\n      (event.metaKey && typeof event.metaKey === 'boolean'))\n  )\n}\n\n/**\n * Extracts the important attributes from a KeyboardEvent so that\n * the event can be sent as JSON\n * @param {KeyboardEvent} event\n */\nexport function simplify ({\n  key,\n  code,\n  ctrlKey,\n  altKey,\n  metaKey,\n  shiftKey,\n  repeat\n}) {\n  return {\n    key,\n    code,\n    ctrlKey,\n    altKey,\n    metaKey,\n    shiftKey,\n    repeat\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/keys.js","import { Node, Transactions, DEFAULT_TIMEOUT } from './node';\nclass Client extends Node {\n  constructor () {\n    super(...arguments);\n    this.timeout = 1000;\n    this.transactions = new Transactions();\n    this.init = ({ subscriptions = [], onConnect = [], onDisconnect = [], actions, log = false, onClientDisconnect }) => {\n      this.initLogging(log);\n      this.subscriptions = subscriptions;\n      this.actions = actions;\n      this.onConnect = onConnect;\n      this.onDisconnect = onDisconnect;\n      this.onClientDisconnect = onClientDisconnect;\n      this.connect();\n            // firefox doesn't fire port.onDisconnect on the background page for navigation\n            // events so every content script must manually call port.disconnect() on unload\n            // TODO: remove this event listener when the following bug is fixed\n            // https://bugzilla.mozilla.org/show_bug.cgi?id=1370368\n      window.addEventListener('beforeunload', () => {\n        this.port.disconnect();\n      });\n    };\n    this.connect = () => {\n      const { subscriptions: subs, onConnect, onDisconnect } = this;\n      const connectionInfo = { name: JSON.stringify({ subs, onConnect, onDisconnect }) };\n      this.port = chrome.runtime.connect(connectionInfo);\n      this.port.onDisconnect.addListener(this.disconnectListener);\n      this.port.onMessage.addListener(this.messageListener);\n    };\n        /**\n         * If the current node is the only target, immediately execute the\n         * action locally, otherwise forward the message to the background\n         * page.\n         * Doesn't send src id because only background page populates src id.\n         */\n    this.msg = (dst, action, arg) => {\n      if (dst === 0) {\n        this.actionHandler(action, arg, 0);\n      } else {\n        this.log('Tx', 'msg', 0, dst, action, arg);\n        this.port.postMessage({ t: 'msg', dst, action, arg });\n      }\n    };\n    this._getLocal = async (localId, src, action, arg) => {\n      try {\n        return { id: localId, v: await this.actionHandler(action, arg, src) };\n      } catch (error) {\n        return { id: localId, e: error };\n      }\n    };\n    this._getRemote = (dst, action, arg, timeout) => new Promise((resolve, reject) => {\n      const tid = this.transactions.new(resolve, reject, timeout);\n      this.log('Tx', 'get', 0, dst, action, arg, tid);\n      this.port.postMessage({ t: 'get', dst, action, arg, tid, timeout });\n    });\n        /**\n         * localId is the id of the current node\n         * localId will be set to 0 if called locally\n         * localId will be set to the node's global id if called from some other node\n         */\n    this.get = async (dst, action, arg, timeout = DEFAULT_TIMEOUT) => {\n      return (dst === 0)\n                ? [await this._getLocal(0, 0, action, arg)]\n                : await this._getRemote(dst, action, arg, timeout);\n    };\n    this.disconnectListener = (port) => {\n      this.onClientDisconnect && this.onClientDisconnect();\n    };\n        /**\n         * Although client nodes don't include a src id when sending messsages,\n         * because it is the bp's duty to populate the src id,\n         * incoming messages MUST have a src id.\n         * t is the message class\n         * If a client node receives a message, it must be an intended destination\n         */\n    this.messageListener = ({ src, dst, t, action, arg, tid, res }) => {\n      switch (t) {\n        case 'msg':\n          this.log('Rx', 'msg', src, dst, action, arg);\n          this.actionHandler(action, arg, src);\n          break;\n        case 'get':\n          this.log('Rx', 'get', src, dst, action, arg, tid);\n          this._getLocal(dst, src, action, arg)\n                        .then((res) => {\n                          try {\n                            this.log('Tx', 'rsp', src, dst, action, res, tid);\n                            this.port.postMessage({ t: 'rsp', src: dst, dst: src, action, tid, res });\n                          } catch (e) { } // the port may disconnect if the user navigated to a new page\n                        }).catch((e) => {\n                          try {\n                            this.log('Tx', 'rsp', src, dst, action, res, tid);\n                            this.port.postMessage({ t: 'rsp', src: dst, dst: src, action, tid, res: { e } });\n                          } catch (e) { }\n                        });\n          break;\n        case 'rsp':\n          this.log('Rx', 'rsp', src, dst, action, res, tid);\n          this.transactions.complete(tid, res);\n          break;\n        default:\n          console.error(`ERROR: Invalid message class: ${t}`);\n          break;\n      }\n    };\n  }\n}\nconst node = new Client();\nconst init = node.init;\nconst msg = node.msg;\nconst get = node.get;\nexport { init, msg, get };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/mosi/client.js\n// module id = 5\n// module chunks = 0 1 2 3 4","// TODO: at some point remove this polyfill or if an npm package is released\n// use it, instead of a random github repo\nif (SAKA_PLATFORM === 'chrome') {\n  require('webextension-polyfill/dist/browser-polyfill')\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/browser_polyfill.js","import 'lib/browser_polyfill'\n\nexport const storageGet = browser.storage.local.get\nexport const storageSet = browser.storage.local.set\nexport const storageRemove = browser.storage.local.remove\nexport const storageClear = browser.storage.local.clear\n\nexport async function getAllActiveProfileOptions () {\n  const { activeProfiles } = await storageGet('activeProfiles')\n  const { options } = await storageGet('options')\n  const activeOptions = {}\n  for (const [category, profile] of Object.entries(activeProfiles)) {\n    Object.assign(activeOptions, options[`${category}_${profile}`])\n  }\n  return activeOptions\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/storage/storage.js","/** Returns the _positive_ modulus */\nexport function posMod (n, m) {\n  return (n % m + m) % m\n}\n/**\n * Return copy of object that contains only the attributes specified in key array \n * \n * @param {Object} object Object that attributes are copied from\n * @param {String[]} keys String array of attributes to copy\n * @throws {Error} Object does not contain attribute key\n * @returns {Object} Object that contains only the attributes specified in key array\n */\nexport function getAttributes (object, keys) {\n  const output = {}\n  keys.forEach(key => {\n    if (object.hasOwnProperty(key)) {\n      output[key] = object[key]\n    } else {\n      throw Error(`object has no attribute ${key}`)\n    }\n  })\n  return output\n}\n\nexport function objectMap (object, map) {\n  const out = {}\n  Object.entries(object).forEach(([attribute, value]) => {\n    out[attribute] = map(value)\n  })\n  return out\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/util.js",";\nexport const DEFAULT_TIMEOUT = 5000;\nexport class Transactions {\n  constructor () {\n    this.tid = 0;\n    this.transactions = {};\n    this.new = (resolve, reject, timeout) => {\n      const tid = ++this.tid;\n      const timer = setTimeout(() => {\n        delete this.transactions[tid];\n        reject(`Transaction ${tid} timed out.`);\n      }, timeout);\n      this.transactions[tid] = { resolve, reject, timer };\n      return tid;\n    };\n    this.complete = (tid, res) => {\n            // The transaction may have already timed out, so check if it still exists\n      const transaction = this.transactions[tid];\n      if (transaction) {\n        transaction.resolve(res);\n        clearTimeout(transaction.timer);\n        delete this.transactions[tid];\n      }\n    };\n  }\n}\nexport class Node {\n  constructor () {\n    this.actionHandler = (action, arg, src) => {\n      const handler = this.actions[action];\n      if (handler) { return handler(arg, src); }\n      throw Error(`No handler for action ${action}`);\n    };\n    this.initLogging = (log) => {\n      this.log = log\n                ? (tx_or_rx, type, src, dst, action, arg_or_res, tid) => {\n                  const arg_str = type === 'rsp' ? 'res' : 'arg';\n                  const tid_str = tid === undefined ? '' : `:${tid}`;\n                  console.log(`%c${tx_or_rx}%c[%c${type}%c${tid_str}](${src} -> ${dst}) :: %c${action}%c, ${arg_str}=`, `color: ${tx_or_rx === 'Tx' ? 'green' : 'red'}`, 'color: auto', `color: ${type === 'get' ? 'blueviolet' : type === 'msg' ? 'blue' : 'brown'}`, 'color: auto', 'color: teal', 'color: auto', arg_or_res);\n                }\n                : () => { };\n    };\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/mosi/node.js\n// module id = 9\n// module chunks = 0 1 2 3 4","/* webextension-polyfill - v0.1.0 - Wed Aug 23 2017 22:58:20 */\n/* -*- Mode: indent-tabs-mode: nil; js-indent-level: 2 -*- */\n/* vim: set sts=2 sw=2 et tw=80: */\n/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\"use strict\";\n\nif (typeof browser === \"undefined\") {\n  // Wrapping the bulk of this polyfill in a one-time-use function is a minor\n  // optimization for Firefox. Since Spidermonkey does not fully parse the\n  // contents of a function until the first time it's called, and since it will\n  // never actually need to be called, this allows the polyfill to be included\n  // in Firefox nearly for free.\n  const wrapAPIs = () => {\n    const apiMetadata = {\n      \"alarms\": {\n        \"clear\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"clearAll\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"get\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"getAll\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        }\n      },\n      \"bookmarks\": {\n        \"create\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"export\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"get\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getChildren\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getRecent\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getTree\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"getSubTree\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"import\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"move\": {\n          \"minArgs\": 2,\n          \"maxArgs\": 2\n        },\n        \"remove\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"removeTree\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"search\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"update\": {\n          \"minArgs\": 2,\n          \"maxArgs\": 2\n        }\n      },\n      \"browserAction\": {\n        \"getBadgeBackgroundColor\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getBadgeText\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getPopup\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getTitle\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"setIcon\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        }\n      },\n      \"commands\": {\n        \"getAll\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        }\n      },\n      \"contextMenus\": {\n        \"update\": {\n          \"minArgs\": 2,\n          \"maxArgs\": 2\n        },\n        \"remove\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"removeAll\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        }\n      },\n      \"cookies\": {\n        \"get\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getAll\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getAllCookieStores\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"remove\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"set\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        }\n      },\n      \"downloads\": {\n        \"download\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"cancel\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"erase\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getFileIcon\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 2\n        },\n        \"open\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"pause\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"removeFile\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"resume\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"search\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"show\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        }\n      },\n      \"extension\": {\n        \"isAllowedFileSchemeAccess\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"isAllowedIncognitoAccess\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        }\n      },\n      \"history\": {\n        \"addUrl\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getVisits\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"deleteAll\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"deleteRange\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"deleteUrl\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"search\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        }\n      },\n      \"i18n\": {\n        \"detectLanguage\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getAcceptLanguages\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        }\n      },\n      \"idle\": {\n        \"queryState\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        }\n      },\n      \"management\": {\n        \"get\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getAll\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"getSelf\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"uninstallSelf\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        }\n      },\n      \"notifications\": {\n        \"clear\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"create\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 2\n        },\n        \"getAll\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"getPermissionLevel\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"update\": {\n          \"minArgs\": 2,\n          \"maxArgs\": 2\n        }\n      },\n      \"pageAction\": {\n        \"getPopup\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getTitle\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"hide\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"setIcon\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"show\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        }\n      },\n      \"runtime\": {\n        \"getBackgroundPage\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"getBrowserInfo\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"getPlatformInfo\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"openOptionsPage\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"requestUpdateCheck\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"sendMessage\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 3\n        },\n        \"sendNativeMessage\": {\n          \"minArgs\": 2,\n          \"maxArgs\": 2\n        },\n        \"setUninstallURL\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        }\n      },\n      \"sessions\": {\n        \"getRecentlyClosed\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"restore\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        }\n      },\n      \"storage\": {\n        \"local\": {\n          \"clear\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"get\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"getBytesInUse\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"remove\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"set\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          }\n        },\n        \"managed\": {\n          \"get\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"getBytesInUse\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          }\n        },\n        \"sync\": {\n          \"clear\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"get\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"getBytesInUse\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"remove\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"set\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          }\n        }\n      },\n      \"tabs\": {\n        \"create\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"captureVisibleTab\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 2\n        },\n        \"detectLanguage\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"duplicate\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"executeScript\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 2\n        },\n        \"get\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getCurrent\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        },\n        \"getZoom\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"getZoomSettings\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"highlight\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"insertCSS\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 2\n        },\n        \"move\": {\n          \"minArgs\": 2,\n          \"maxArgs\": 2\n        },\n        \"reload\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 2\n        },\n        \"remove\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"query\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"removeCSS\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 2\n        },\n        \"sendMessage\": {\n          \"minArgs\": 2,\n          \"maxArgs\": 3\n        },\n        \"setZoom\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 2\n        },\n        \"setZoomSettings\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 2\n        },\n        \"update\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 2\n        }\n      },\n      \"webNavigation\": {\n        \"getAllFrames\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"getFrame\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        }\n      },\n      \"webRequest\": {\n        \"handlerBehaviorChanged\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 0\n        }\n      },\n      \"windows\": {\n        \"create\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"get\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 2\n        },\n        \"getAll\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"getCurrent\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"getLastFocused\": {\n          \"minArgs\": 0,\n          \"maxArgs\": 1\n        },\n        \"remove\": {\n          \"minArgs\": 1,\n          \"maxArgs\": 1\n        },\n        \"update\": {\n          \"minArgs\": 2,\n          \"maxArgs\": 2\n        }\n      }\n    };\n\n    /**\n     * A WeakMap subclass which creates and stores a value for any key which does\n     * not exist when accessed, but behaves exactly as an ordinary WeakMap\n     * otherwise.\n     *\n     * @param {function} createItem\n     *        A function which will be called in order to create the value for any\n     *        key which does not exist, the first time it is accessed. The\n     *        function receives, as its only argument, the key being created.\n     */\n    class DefaultWeakMap extends WeakMap {\n      constructor(createItem, items = undefined) {\n        super(items);\n        this.createItem = createItem;\n      }\n\n      get(key) {\n        if (!this.has(key)) {\n          this.set(key, this.createItem(key));\n        }\n\n        return super.get(key);\n      }\n    }\n\n    /**\n     * Returns true if the given object is an object with a `then` method, and can\n     * therefore be assumed to behave as a Promise.\n     *\n     * @param {*} value The value to test.\n     * @returns {boolean} True if the value is thenable.\n     */\n    const isThenable = value => {\n      return value && typeof value === \"object\" && typeof value.then === \"function\";\n    };\n\n    /**\n     * Creates and returns a function which, when called, will resolve or reject\n     * the given promise based on how it is called:\n     *\n     * - If, when called, `chrome.runtime.lastError` contains a non-null object,\n     *   the promise is rejected with that value.\n     * - If the function is called with exactly one argument, the promise is\n     *   resolved to that value.\n     * - Otherwise, the promise is resolved to an array containing all of the\n     *   function's arguments.\n     *\n     * @param {object} promise\n     *        An object containing the resolution and rejection functions of a\n     *        promise.\n     * @param {function} promise.resolve\n     *        The promise's resolution function.\n     * @param {function} promise.rejection\n     *        The promise's rejection function.\n     *\n     * @returns {function}\n     *        The generated callback function.\n     */\n    const makeCallback = promise => {\n      return (...callbackArgs) => {\n        if (chrome.runtime.lastError) {\n          promise.reject(chrome.runtime.lastError);\n        } else if (callbackArgs.length === 1) {\n          promise.resolve(callbackArgs[0]);\n        } else {\n          promise.resolve(callbackArgs);\n        }\n      };\n    };\n\n    /**\n     * Creates a wrapper function for a method with the given name and metadata.\n     *\n     * @param {string} name\n     *        The name of the method which is being wrapped.\n     * @param {object} metadata\n     *        Metadata about the method being wrapped.\n     * @param {integer} metadata.minArgs\n     *        The minimum number of arguments which must be passed to the\n     *        function. If called with fewer than this number of arguments, the\n     *        wrapper will raise an exception.\n     * @param {integer} metadata.maxArgs\n     *        The maximum number of arguments which may be passed to the\n     *        function. If called with more than this number of arguments, the\n     *        wrapper will raise an exception.\n     *\n     * @returns {function(object, ...*)}\n     *       The generated wrapper function.\n     */\n    const wrapAsyncFunction = (name, metadata) => {\n      const pluralizeArguments = (numArgs) => numArgs == 1 ? \"argument\" : \"arguments\";\n\n      return function asyncFunctionWrapper(target, ...args) {\n        if (args.length < metadata.minArgs) {\n          throw new Error(`Expected at least ${metadata.minArgs} ${pluralizeArguments(metadata.minArgs)} for ${name}(), got ${args.length}`);\n        }\n\n        if (args.length > metadata.maxArgs) {\n          throw new Error(`Expected at most ${metadata.maxArgs} ${pluralizeArguments(metadata.maxArgs)} for ${name}(), got ${args.length}`);\n        }\n\n        return new Promise((resolve, reject) => {\n          target[name](...args, makeCallback({resolve, reject}));\n        });\n      };\n    };\n\n    /**\n     * Wraps an existing method of the target object, so that calls to it are\n     * intercepted by the given wrapper function. The wrapper function receives,\n     * as its first argument, the original `target` object, followed by each of\n     * the arguments passed to the orginal method.\n     *\n     * @param {object} target\n     *        The original target object that the wrapped method belongs to.\n     * @param {function} method\n     *        The method being wrapped. This is used as the target of the Proxy\n     *        object which is created to wrap the method.\n     * @param {function} wrapper\n     *        The wrapper function which is called in place of a direct invocation\n     *        of the wrapped method.\n     *\n     * @returns {Proxy<function>}\n     *        A Proxy object for the given method, which invokes the given wrapper\n     *        method in its place.\n     */\n    const wrapMethod = (target, method, wrapper) => {\n      return new Proxy(method, {\n        apply(targetMethod, thisObj, args) {\n          return wrapper.call(thisObj, target, ...args);\n        },\n      });\n    };\n\n    let hasOwnProperty = Function.call.bind(Object.prototype.hasOwnProperty);\n\n    /**\n     * Wraps an object in a Proxy which intercepts and wraps certain methods\n     * based on the given `wrappers` and `metadata` objects.\n     *\n     * @param {object} target\n     *        The target object to wrap.\n     *\n     * @param {object} [wrappers = {}]\n     *        An object tree containing wrapper functions for special cases. Any\n     *        function present in this object tree is called in place of the\n     *        method in the same location in the `target` object tree. These\n     *        wrapper methods are invoked as described in {@see wrapMethod}.\n     *\n     * @param {object} [metadata = {}]\n     *        An object tree containing metadata used to automatically generate\n     *        Promise-based wrapper functions for asynchronous. Any function in\n     *        the `target` object tree which has a corresponding metadata object\n     *        in the same location in the `metadata` tree is replaced with an\n     *        automatically-generated wrapper function, as described in\n     *        {@see wrapAsyncFunction}\n     *\n     * @returns {Proxy<object>}\n     */\n    const wrapObject = (target, wrappers = {}, metadata = {}) => {\n      let cache = Object.create(null);\n\n      let handlers = {\n        has(target, prop) {\n          return prop in target || prop in cache;\n        },\n\n        get(target, prop, receiver) {\n          if (prop in cache) {\n            return cache[prop];\n          }\n\n          if (!(prop in target)) {\n            return undefined;\n          }\n\n          let value = target[prop];\n\n          if (typeof value === \"function\") {\n            // This is a method on the underlying object. Check if we need to do\n            // any wrapping.\n\n            if (typeof wrappers[prop] === \"function\") {\n              // We have a special-case wrapper for this method.\n              value = wrapMethod(target, target[prop], wrappers[prop]);\n            } else if (hasOwnProperty(metadata, prop)) {\n              // This is an async method that we have metadata for. Create a\n              // Promise wrapper for it.\n              let wrapper = wrapAsyncFunction(prop, metadata[prop]);\n              value = wrapMethod(target, target[prop], wrapper);\n            } else {\n              // This is a method that we don't know or care about. Return the\n              // original method, bound to the underlying object.\n              value = value.bind(target);\n            }\n          } else if (typeof value === \"object\" && value !== null &&\n                     (hasOwnProperty(wrappers, prop) ||\n                      hasOwnProperty(metadata, prop))) {\n            // This is an object that we need to do some wrapping for the children\n            // of. Create a sub-object wrapper for it with the appropriate child\n            // metadata.\n            value = wrapObject(value, wrappers[prop], metadata[prop]);\n          } else {\n            // We don't need to do any wrapping for this property,\n            // so just forward all access to the underlying object.\n            Object.defineProperty(cache, prop, {\n              configurable: true,\n              enumerable: true,\n              get() {\n                return target[prop];\n              },\n              set(value) {\n                target[prop] = value;\n              },\n            });\n\n            return value;\n          }\n\n          cache[prop] = value;\n          return value;\n        },\n\n        set(target, prop, value, receiver) {\n          if (prop in cache) {\n            cache[prop] = value;\n          } else {\n            target[prop] = value;\n          }\n          return true;\n        },\n\n        defineProperty(target, prop, desc) {\n          return Reflect.defineProperty(cache, prop, desc);\n        },\n\n        deleteProperty(target, prop) {\n          return Reflect.deleteProperty(cache, prop);\n        },\n      };\n\n      return new Proxy(target, handlers);\n    };\n\n    /**\n     * Creates a set of wrapper functions for an event object, which handles\n     * wrapping of listener functions that those messages are passed.\n     *\n     * A single wrapper is created for each listener function, and stored in a\n     * map. Subsequent calls to `addListener`, `hasListener`, or `removeListener`\n     * retrieve the original wrapper, so that  attempts to remove a\n     * previously-added listener work as expected.\n     *\n     * @param {DefaultWeakMap<function, function>} wrapperMap\n     *        A DefaultWeakMap object which will create the appropriate wrapper\n     *        for a given listener function when one does not exist, and retrieve\n     *        an existing one when it does.\n     *\n     * @returns {object}\n     */\n    const wrapEvent = wrapperMap => ({\n      addListener(target, listener, ...args) {\n        target.addListener(wrapperMap.get(listener), ...args);\n      },\n\n      hasListener(target, listener) {\n        return target.hasListener(wrapperMap.get(listener));\n      },\n\n      removeListener(target, listener) {\n        target.removeListener(wrapperMap.get(listener));\n      },\n    });\n\n    const onMessageWrappers = new DefaultWeakMap(listener => {\n      if (typeof listener !== \"function\") {\n        return listener;\n      }\n\n      /**\n       * Wraps a message listener function so that it may send responses based on\n       * its return value, rather than by returning a sentinel value and calling a\n       * callback. If the listener function returns a Promise, the response is\n       * sent when the promise either resolves or rejects.\n       *\n       * @param {*} message\n       *        The message sent by the other end of the channel.\n       * @param {object} sender\n       *        Details about the sender of the message.\n       * @param {function(*)} sendResponse\n       *        A callback which, when called with an arbitrary argument, sends\n       *        that value as a response.\n       * @returns {boolean}\n       *        True if the wrapped listener returned a Promise, which will later\n       *        yield a response. False otherwise.\n       */\n      return function onMessage(message, sender, sendResponse) {\n        let result = listener(message, sender);\n\n        if (isThenable(result)) {\n          result.then(sendResponse, error => {\n            console.error(error);\n            sendResponse(error);\n          });\n\n          return true;\n        } else if (result !== undefined) {\n          sendResponse(result);\n        }\n      };\n    });\n\n    const staticWrappers = {\n      runtime: {\n        onMessage: wrapEvent(onMessageWrappers),\n      },\n    };\n\n    return wrapObject(chrome, staticWrappers, apiMetadata);\n  };\n\n  window.browser = wrapAPIs();\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/webextension-polyfill/dist/browser-polyfill.js\n// module id = 10\n// module chunks = 0 1 2 3 4","module.exports = {\"Backquote\":{\"value\":\"`\",\"shift\":\"~\"},\"Backslash\":{\"value\":\"\\\\\",\"shift\":\"|\"},\"BracketLeft\":{\"value\":\"[\",\"shift\":\"{\"},\"BracketRight\":{\"value\":\"]\",\"shift\":\"}\"},\"Comma\":{\"value\":\",\",\"shift\":\"<\"},\"Digit0\":{\"value\":\"0\",\"shift\":\")\"},\"Digit1\":{\"value\":\"1\",\"shift\":\"!\"},\"Digit2\":{\"value\":\"2\",\"shift\":\"@\"},\"Digit3\":{\"value\":\"3\",\"shift\":\"#\"},\"Digit4\":{\"value\":\"4\",\"shift\":\"$\"},\"Digit5\":{\"value\":\"5\",\"shift\":\"%\"},\"Digit6\":{\"value\":\"6\",\"shift\":\"^\"},\"Digit7\":{\"value\":\"7\",\"shift\":\"&\"},\"Digit8\":{\"value\":\"8\",\"shift\":\"*\"},\"Digit9\":{\"value\":\"9\",\"shift\":\"(\"},\"Equal\":{\"value\":\"=\",\"shift\":\"+\"},\"IntlBackslash\":{\"value\":\"\\\\\",\"shift\":\"|\",\"international\":true},\"IntlRo\":{\"value\":\"\\\\\",\"shift\":\"\",\"international\":true},\"IntlYen\":{\"value\":\"\",\"shift\":\"\",\"value2\":\"\\\\\",\"shift2\":\"/\",\"international\":true},\"KeyA\":{\"value\":\"a\",\"shift\":\"A\"},\"KeyB\":{\"value\":\"b\",\"shift\":\"B\"},\"KeyC\":{\"value\":\"c\",\"shift\":\"C\"},\"KeyD\":{\"value\":\"d\",\"shift\":\"D\"},\"KeyE\":{\"value\":\"e\",\"shift\":\"E\"},\"KeyF\":{\"value\":\"f\",\"shift\":\"F\"},\"KeyG\":{\"value\":\"g\",\"shift\":\"G\"},\"KeyH\":{\"value\":\"h\",\"shift\":\"H\"},\"KeyI\":{\"value\":\"i\",\"shift\":\"I\"},\"KeyJ\":{\"value\":\"j\",\"shift\":\"J\"},\"KeyK\":{\"value\":\"k\",\"shift\":\"K\"},\"KeyL\":{\"value\":\"l\",\"shift\":\"L\"},\"KeyM\":{\"value\":\"m\",\"shift\":\"M\"},\"KeyN\":{\"value\":\"n\",\"shift\":\"N\"},\"KeyO\":{\"value\":\"o\",\"shift\":\"O\"},\"KeyP\":{\"value\":\"p\",\"shift\":\"P\"},\"KeyQ\":{\"value\":\"q\",\"shift\":\"Q\"},\"KeyR\":{\"value\":\"r\",\"shift\":\"R\"},\"KeyS\":{\"value\":\"s\",\"shift\":\"S\"},\"KeyT\":{\"value\":\"t\",\"shift\":\"T\"},\"KeyU\":{\"value\":\"u\",\"shift\":\"U\"},\"KeyV\":{\"value\":\"v\",\"shift\":\"V\"},\"KeyW\":{\"value\":\"w\",\"shift\":\"W\"},\"KeyX\":{\"value\":\"x\",\"shift\":\"X\"},\"KeyY\":{\"value\":\"y\",\"shift\":\"Y\"},\"KeyZ\":{\"value\":\"z\",\"shift\":\"Z\"},\"Minus\":{\"value\":\"-\",\"shift\":\"_\"},\"Period\":{\"value\":\".\",\"shift\":\">\"},\"Quote\":{\"value\":\"'\",\"shift\":\"\\\"\"},\"Semicolon\":{\"value\":\";\",\"shift\":\":\"},\"Slash\":{\"value\":\"/\",\"shift\":\"?\"},\"Space\":{\"value\":\"Space\",\"shift\":\"Space\"},\"Tab\":{\"value\":\"Tab\",\"shift\":\"Tab\"},\"CapsLock\":{\"value\":\"CapsLock\",\"shift\":\"CapsLock\"},\"Escape\":{\"value\":\"Escape\",\"shift\":\"Escape\"},\"Backspace\":{\"value\":\"Backspace\",\"shift\":\"Backspace\"},\"ArrowLeft\":{\"value\":\"ArrowLeft\",\"shift\":\"ArrowLeft\"},\"ArrowRight\":{\"value\":\"ArrowRight\",\"shift\":\"ArrowRight\"},\"ArrowUp\":{\"value\":\"ArrowUp\",\"shift\":\"ArrowUp\"},\"ArrowDown\":{\"value\":\"ArrowDown\",\"shift\":\"ArrowDown\"},\"ShiftLeft\":{\"value\":\"ShiftLeft\",\"shift\":\"ShiftLeft\"},\"ShiftRight\":{\"value\":\"ShiftRight\",\"shift\":\"ShiftRight\"},\"ControlLeft\":{\"value\":\"ControlLeft\",\"shift\":\"ControlLeft\"},\"AltLeft\":{\"value\":\"AltLeft\",\"shift\":\"AltLeft\"},\"AltRight\":{\"value\":\"AltRight\",\"shift\":\"AltRight\"},\"MetaLeft\":{\"value\":\"MetaLeft\",\"shift\":\"MetaLeft\"},\"MetaRight\":{\"value\":\"MetaRight\",\"shift\":\"MetaRight\"}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/lib/friendlyCodeStrings.json\n// module id = 11\n// module chunks = 0 1 2 3 4","/**\n * Returns true only if str is a valid url\n * @param {string} str\n */\nexport function isURL (str) {\n  try {\n    new URL(str)\n  } catch (e) {\n    return false\n  }\n  return true\n}\n\nexport function stripProtocol (url) {\n  return url.replace(/(^\\w+:|^)\\/\\//, '')\n}\n\nexport function stripWWW (url) {\n  return url.replace(/^www\\./, '')\n}\n\nexport function startsWithProtocol (str) {\n  return str.match(/(^\\w+:|^)\\/\\//) !== null\n}\n\nexport function startsWithWWW (str) {\n  return str.match(/^www\\./, '') !== null\n}\n\n/**\n * Based on https://github.com/1995eaton/chromium-vim/blob/aec10cf47943b4674a5bc92c46d3c3c138d3cba3/content_scripts/utils.js#L51\n */\nexport function searchURL (\n  query,\n  queryURLTemplate = 'https://www.google.com/search?q='\n) {\n  return isLikeURL(query)\n    ? (!/^[a-zA-Z-]+:/.test(query) ? 'http://' : '') + query\n    : searchEngineQueryURL(query, queryURLTemplate)\n}\n\n/**\n * Based on https://github.com/1995eaton/chromium-vim/blob/aec10cf47943b4674a5bc92c46d3c3c138d3cba3/content_scripts/utils.js#L45\n */\nexport function searchEngineQueryURL (query, queryURLTemplate) {\n  const encodedSearchQuery = encodeURIComponent(query)\n  const i = queryURLTemplate.lastIndexOf('%s')\n  return i < 0\n    ? `${queryURLTemplate}${encodedSearchQuery}`\n    : `${queryURLTemplate.slice(\n      0,\n      i\n    )}${encodedSearchQuery}${queryURLTemplate.slice(i + 2)}`\n}\n\n/**\n * Returns true if the text is a valid URL (including protocol, e.g. http://hello)\n * or probably corresponds to a valid URL (e.g. google.com)\n * Based on https://github.com/1995eaton/chromium-vim/blob/aec10cf47943b4674a5bc92c46d3c3c138d3cba3/content_scripts/utils.js#L59\n */\nexport function isLikeURL (url) {\n  url = url.trim()\n  if (url.indexOf(' ') !== -1) {\n    return false\n  }\n  if (url.search(/^(about|file):[^:]/) !== -1) {\n    return true\n  }\n  const protocol = (url.match(/^([a-zA-Z-]+:)[^:]/) || [''])[0].slice(0, -1)\n  const protocolMatch = isProtocol(protocol)\n  if (protocolMatch) {\n    url = url.replace(/^[a-zA-Z-]+:\\/*/, '')\n  }\n  const hasPath = /.*[a-zA-Z].*\\//.test(url)\n  url = url.replace(/(:[0-9]+)?([#/].*|$)/g, '').split('.')\n  if (protocolMatch && /^[a-zA-Z0-9@!]+$/.test(url)) {\n    return true\n  }\n  if (protocol && !protocolMatch && protocol !== 'localhost:') {\n    return false\n  }\n  // IP addresses\n  const isIP = url.every(e => /^[0-9]+$/.test(e) && +e >= 0 && +e < 256)\n  if ((isIP && !protocol && url.length === 4) || (isIP && protocolMatch)) {\n    return true\n  }\n  return (\n    (url.every(e => /^[a-z0-9-]+$/i.test(e)) &&\n      (url.length > 1 && isTLD(url[url.length - 1]))) ||\n    (url.length === 1 && url[0] === 'localhost') ||\n    hasPath\n  )\n}\n\nconst knownTLDs = [\n  'abogado',\n  'ac',\n  'academy',\n  'accountants',\n  'active',\n  'actor',\n  'ad',\n  'adult',\n  'ae',\n  'aero',\n  'af',\n  'ag',\n  'agency',\n  'ai',\n  'airforce',\n  'al',\n  'allfinanz',\n  'alsace',\n  'am',\n  'amsterdam',\n  'an',\n  'android',\n  'ao',\n  'aq',\n  'aquarelle',\n  'ar',\n  'archi',\n  'army',\n  'arpa',\n  'as',\n  'asia',\n  'associates',\n  'at',\n  'attorney',\n  'au',\n  'auction',\n  'audio',\n  'autos',\n  'aw',\n  'ax',\n  'axa',\n  'az',\n  'ba',\n  'band',\n  'bank',\n  'bar',\n  'barclaycard',\n  'barclays',\n  'bargains',\n  'bayern',\n  'bb',\n  'bd',\n  'be',\n  'beer',\n  'berlin',\n  'best',\n  'bf',\n  'bg',\n  'bh',\n  'bi',\n  'bid',\n  'bike',\n  'bio',\n  'biz',\n  'bj',\n  'black',\n  'blackfriday',\n  'bloomberg',\n  'blue',\n  'bm',\n  'bmw',\n  'bn',\n  'bnpparibas',\n  'bo',\n  'boo',\n  'boutique',\n  'br',\n  'brussels',\n  'bs',\n  'bt',\n  'budapest',\n  'build',\n  'builders',\n  'business',\n  'buzz',\n  'bv',\n  'bw',\n  'by',\n  'bz',\n  'bzh',\n  'ca',\n  'cab',\n  'cal',\n  'camera',\n  'camp',\n  'cancerresearch',\n  'capetown',\n  'capital',\n  'caravan',\n  'cards',\n  'care',\n  'career',\n  'careers',\n  'cartier',\n  'casa',\n  'cash',\n  'cat',\n  'catering',\n  'cc',\n  'cd',\n  'center',\n  'ceo',\n  'cern',\n  'cf',\n  'cg',\n  'ch',\n  'channel',\n  'cheap',\n  'christmas',\n  'chrome',\n  'church',\n  'ci',\n  'citic',\n  'city',\n  'ck',\n  'cl',\n  'claims',\n  'cleaning',\n  'click',\n  'clinic',\n  'clothing',\n  'club',\n  'cm',\n  'cn',\n  'co',\n  'coach',\n  'codes',\n  'coffee',\n  'college',\n  'cologne',\n  'com',\n  'community',\n  'company',\n  'computer',\n  'condos',\n  'construction',\n  'consulting',\n  'contractors',\n  'cooking',\n  'cool',\n  'coop',\n  'country',\n  'cr',\n  'credit',\n  'creditcard',\n  'cricket',\n  'crs',\n  'cruises',\n  'cu',\n  'cuisinella',\n  'cv',\n  'cw',\n  'cx',\n  'cy',\n  'cymru',\n  'cz',\n  'dabur',\n  'dad',\n  'dance',\n  'dating',\n  'day',\n  'dclk',\n  'de',\n  'deals',\n  'degree',\n  'delivery',\n  'democrat',\n  'dental',\n  'dentist',\n  'desi',\n  'design',\n  'dev',\n  'diamonds',\n  'diet',\n  'digital',\n  'direct',\n  'directory',\n  'discount',\n  'dj',\n  'dk',\n  'dm',\n  'dnp',\n  'do',\n  'docs',\n  'domains',\n  'doosan',\n  'durban',\n  'dvag',\n  'dz',\n  'eat',\n  'ec',\n  'edu',\n  'education',\n  'ee',\n  'eg',\n  'email',\n  'emerck',\n  'energy',\n  'engineer',\n  'engineering',\n  'enterprises',\n  'equipment',\n  'er',\n  'es',\n  'esq',\n  'estate',\n  'et',\n  'eu',\n  'eurovision',\n  'eus',\n  'events',\n  'everbank',\n  'exchange',\n  'expert',\n  'exposed',\n  'fail',\n  'farm',\n  'fashion',\n  'feedback',\n  'fi',\n  'finance',\n  'financial',\n  'firmdale',\n  'fish',\n  'fishing',\n  'fit',\n  'fitness',\n  'fj',\n  'fk',\n  'flights',\n  'florist',\n  'flowers',\n  'flsmidth',\n  'fly',\n  'fm',\n  'fo',\n  'foo',\n  'forsale',\n  'foundation',\n  'fr',\n  'frl',\n  'frogans',\n  'fund',\n  'furniture',\n  'futbol',\n  'ga',\n  'gal',\n  'gallery',\n  'garden',\n  'gb',\n  'gbiz',\n  'gd',\n  'ge',\n  'gent',\n  'gf',\n  'gg',\n  'ggee',\n  'gh',\n  'gi',\n  'gift',\n  'gifts',\n  'gives',\n  'gl',\n  'glass',\n  'gle',\n  'global',\n  'globo',\n  'gm',\n  'gmail',\n  'gmo',\n  'gmx',\n  'gn',\n  'goog',\n  'google',\n  'gop',\n  'gov',\n  'gp',\n  'gq',\n  'gr',\n  'graphics',\n  'gratis',\n  'green',\n  'gripe',\n  'gs',\n  'gt',\n  'gu',\n  'guide',\n  'guitars',\n  'guru',\n  'gw',\n  'gy',\n  'hamburg',\n  'hangout',\n  'haus',\n  'healthcare',\n  'help',\n  'here',\n  'hermes',\n  'hiphop',\n  'hiv',\n  'hk',\n  'hm',\n  'hn',\n  'holdings',\n  'holiday',\n  'homes',\n  'horse',\n  'host',\n  'hosting',\n  'house',\n  'how',\n  'hr',\n  'ht',\n  'hu',\n  'ibm',\n  'id',\n  'ie',\n  'ifm',\n  'il',\n  'im',\n  'immo',\n  'immobilien',\n  'in',\n  'industries',\n  'info',\n  'ing',\n  'ink',\n  'institute',\n  'insure',\n  'int',\n  'international',\n  'investments',\n  'io',\n  'iq',\n  'ir',\n  'irish',\n  'is',\n  'it',\n  'iwc',\n  'jcb',\n  'je',\n  'jetzt',\n  'jm',\n  'jo',\n  'jobs',\n  'joburg',\n  'jp',\n  'juegos',\n  'kaufen',\n  'kddi',\n  'ke',\n  'kg',\n  'kh',\n  'ki',\n  'kim',\n  'kitchen',\n  'kiwi',\n  'km',\n  'kn',\n  'koeln',\n  'kp',\n  'kr',\n  'krd',\n  'kred',\n  'kw',\n  'ky',\n  'kyoto',\n  'kz',\n  'la',\n  'lacaixa',\n  'land',\n  'lat',\n  'latrobe',\n  'lawyer',\n  'lb',\n  'lc',\n  'lds',\n  'lease',\n  'legal',\n  'lgbt',\n  'li',\n  'lidl',\n  'life',\n  'lighting',\n  'limited',\n  'limo',\n  'link',\n  'lk',\n  'loans',\n  'london',\n  'lotte',\n  'lotto',\n  'lr',\n  'ls',\n  'lt',\n  'ltda',\n  'lu',\n  'luxe',\n  'luxury',\n  'lv',\n  'ly',\n  'ma',\n  'madrid',\n  'maison',\n  'management',\n  'mango',\n  'market',\n  'marketing',\n  'marriott',\n  'mc',\n  'md',\n  'me',\n  'media',\n  'meet',\n  'melbourne',\n  'meme',\n  'memorial',\n  'menu',\n  'mg',\n  'mh',\n  'miami',\n  'mil',\n  'mini',\n  'mk',\n  'ml',\n  'mm',\n  'mn',\n  'mo',\n  'mobi',\n  'moda',\n  'moe',\n  'monash',\n  'money',\n  'mormon',\n  'mortgage',\n  'moscow',\n  'motorcycles',\n  'mov',\n  'mp',\n  'mq',\n  'mr',\n  'ms',\n  'mt',\n  'mu',\n  'museum',\n  'mv',\n  'mw',\n  'mx',\n  'my',\n  'mz',\n  'na',\n  'nagoya',\n  'name',\n  'navy',\n  'nc',\n  'ne',\n  'net',\n  'network',\n  'neustar',\n  'new',\n  'nexus',\n  'nf',\n  'ng',\n  'ngo',\n  'nhk',\n  'ni',\n  'ninja',\n  'nl',\n  'no',\n  'np',\n  'nr',\n  'nra',\n  'nrw',\n  'nu',\n  'nyc',\n  'nz',\n  'okinawa',\n  'om',\n  'one',\n  'ong',\n  'onl',\n  'ooo',\n  'org',\n  'organic',\n  'osaka',\n  'otsuka',\n  'ovh',\n  'pa',\n  'paris',\n  'partners',\n  'parts',\n  'party',\n  'pe',\n  'pf',\n  'pg',\n  'ph',\n  'pharmacy',\n  'photo',\n  'photography',\n  'photos',\n  'physio',\n  'pics',\n  'pictures',\n  'pink',\n  'pizza',\n  'pk',\n  'pl',\n  'place',\n  'plumbing',\n  'pm',\n  'pn',\n  'pohl',\n  'poker',\n  'porn',\n  'post',\n  'pr',\n  'praxi',\n  'press',\n  'pro',\n  'prod',\n  'productions',\n  'prof',\n  'properties',\n  'property',\n  'ps',\n  'pt',\n  'pub',\n  'pw',\n  'py',\n  'qa',\n  'qpon',\n  'quebec',\n  're',\n  'realtor',\n  'recipes',\n  'red',\n  'rehab',\n  'reise',\n  'reisen',\n  'reit',\n  'ren',\n  'rentals',\n  'repair',\n  'report',\n  'republican',\n  'rest',\n  'restaurant',\n  'reviews',\n  'rich',\n  'rio',\n  'rip',\n  'ro',\n  'rocks',\n  'rodeo',\n  'rs',\n  'rsvp',\n  'ru',\n  'ruhr',\n  'rw',\n  'ryukyu',\n  'sa',\n  'saarland',\n  'sale',\n  'samsung',\n  'sarl',\n  'sb',\n  'sc',\n  'sca',\n  'scb',\n  'schmidt',\n  'schule',\n  'schwarz',\n  'science',\n  'scot',\n  'sd',\n  'se',\n  'services',\n  'sew',\n  'sexy',\n  'sg',\n  'sh',\n  'shiksha',\n  'shoes',\n  'shriram',\n  'si',\n  'singles',\n  'sj',\n  'sk',\n  'sky',\n  'sl',\n  'sm',\n  'sn',\n  'so',\n  'social',\n  'software',\n  'sohu',\n  'solar',\n  'solutions',\n  'soy',\n  'space',\n  'spiegel',\n  'sr',\n  'st',\n  'su',\n  'supplies',\n  'supply',\n  'support',\n  'surf',\n  'surgery',\n  'suzuki',\n  'sv',\n  'sx',\n  'sy',\n  'sydney',\n  'systems',\n  'sz',\n  'taipei',\n  'tatar',\n  'tattoo',\n  'tax',\n  'tc',\n  'td',\n  'technology',\n  'tel',\n  'temasek',\n  'tf',\n  'tg',\n  'th',\n  'tienda',\n  'tips',\n  'tires',\n  'tirol',\n  'tj',\n  'tk',\n  'tl',\n  'tm',\n  'tn',\n  'to',\n  'today',\n  'tokyo',\n  'tools',\n  'top',\n  'town',\n  'toys',\n  'tp',\n  'tr',\n  'trade',\n  'training',\n  'travel',\n  'trust',\n  'tt',\n  'tui',\n  'tv',\n  'tw',\n  'tz',\n  'ua',\n  'ug',\n  'uk',\n  'university',\n  'uno',\n  'uol',\n  'us',\n  'uy',\n  'uz',\n  'va',\n  'vacations',\n  'vc',\n  've',\n  'vegas',\n  'ventures',\n  'versicherung',\n  'vet',\n  'vg',\n  'vi',\n  'viajes',\n  'video',\n  'villas',\n  'vision',\n  'vlaanderen',\n  'vn',\n  'vodka',\n  'vote',\n  'voting',\n  'voto',\n  'voyage',\n  'vu',\n  'wales',\n  'wang',\n  'watch',\n  'webcam',\n  'website',\n  'wed',\n  'wedding',\n  'wf',\n  'whoswho',\n  'wien',\n  'wiki',\n  'williamhill',\n  'wme',\n  'work',\n  'works',\n  'world',\n  'ws',\n  'wtc',\n  'wtf',\n  'xn--1qqw23a',\n  'xn--3bst00m',\n  'xn--3ds443g',\n  'xn--3e0b707e',\n  'xn--45brj9c',\n  'xn--45q11c',\n  'xn--4gbrim',\n  'xn--55qw42g',\n  'xn--55qx5d',\n  'xn--6frz82g',\n  'xn--6qq986b3xl',\n  'xn--80adxhks',\n  'xn--80ao21a',\n  'xn--80asehdb',\n  'xn--80aswg',\n  'xn--90a3ac',\n  'xn--b4w605ferd',\n  'xn--c1avg',\n  'xn--cg4bki',\n  'xn--clchc0ea0b2g2a9gcd',\n  'xn--czr694b',\n  'xn--czrs0t',\n  'xn--czru2d',\n  'xn--d1acj3b',\n  'xn--d1alf',\n  'xn--fiq228c5hs',\n  'xn--fiq64b',\n  'xn--fiqs8s',\n  'xn--fiqz9s',\n  'xn--flw351e',\n  'xn--fpcrj9c3d',\n  'xn--fzc2c9e2c',\n  'xn--gecrj9c',\n  'xn--h2brj9c',\n  'xn--hxt814e',\n  'xn--i1b6b1a6a2e',\n  'xn--io0a7i',\n  'xn--j1amh',\n  'xn--j6w193g',\n  'xn--kprw13d',\n  'xn--kpry57d',\n  'xn--kput3i',\n  'xn--l1acc',\n  'xn--lgbbat1ad8j',\n  'xn--mgb9awbf',\n  'xn--mgba3a4f16a',\n  'xn--mgbaam7a8h',\n  'xn--mgbab2bd',\n  'xn--mgbayh7gpa',\n  'xn--mgbbh1a71e',\n  'xn--mgbc0a9azcg',\n  'xn--mgberp4a5d4ar',\n  'xn--mgbx4cd0ab',\n  'xn--ngbc5azd',\n  'xn--node',\n  'xn--nqv7f',\n  'xn--nqv7fs00ema',\n  'xn--o3cw4h',\n  'xn--ogbpf8fl',\n  'xn--p1acf',\n  'xn--p1ai',\n  'xn--pgbs0dh',\n  'xn--q9jyb4c',\n  'xn--qcka1pmc',\n  'xn--rhqv96g',\n  'xn--s9brj9c',\n  'xn--ses554g',\n  'xn--unup4y',\n  'xn--vermgensberater-ctb',\n  'xn--vermgensberatung-pwb',\n  'xn--vhquv',\n  'xn--wgbh1c',\n  'xn--wgbl6a',\n  'xn--xhq521b',\n  'xn--xkc2al3hye2a',\n  'xn--xkc2dl3a5ee0h',\n  'xn--yfro4i67o',\n  'xn--ygbi2ammx',\n  'xn--zfr164b',\n  'xxx',\n  'xyz',\n  'yachts',\n  'yandex',\n  'ye',\n  'yoga',\n  'yokohama',\n  'youtube',\n  'yt',\n  'za',\n  'zip',\n  'zm',\n  'zone',\n  'zuerich',\n  'zw'\n]\n/** Returns whether the provided text is a known TLD (top-level domain) */\nexport function isTLD (text) {\n  return knownTLDs.indexOf(text) !== -1\n}\n\nconst knownProtocols = [\n  'http:',\n  'https:',\n  'file:',\n  'ftp:',\n  'chrome:',\n  'chrome-extension:'\n]\n/** Returns whether the provided text is a known protocol */\nexport function isProtocol (text) {\n  return knownProtocols.indexOf(text) !== -1\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/url.js","import { validKeyboardEvent, keyboardEventString } from 'lib/keys'\n\n/**\n * Given an object mapping commands to their key bindings,\n * returns the trie representation.\n */\nexport function generateCommandTrie (commandMap) {\n  return JSONTrie(bindingsList(commandMap))\n}\n\n/**\n * Given an object mapping commands to their key bindings,\n * returns an array of (commands, binding).\n * A command may have more than one binding, or none at all.\n */\nfunction bindingsList (bindingsMap) {\n  const out = []\n  for (const [command, bindings] of Object.entries(bindingsMap)) {\n    if (bindings === undefined) {\n      throw Error(`A profile is missing bindings for command ${command}`)\n    }\n    for (const binding of bindings) {\n      const keySequence = binding.map(key => {\n        try {\n          validKeyboardEvent(key)\n        } catch (e) {\n          throw Error(`Invalid KeyboardEvent descriptor for ${command}`)\n        }\n        return keyboardEventString(key)\n      })\n      out.push([keySequence, command, binding])\n    }\n  }\n  return out\n}\n\n/**\n * Given an array of (command, binding),\n * returns the trie representation.\n */\nfunction JSONTrie (bindings) {\n  const trie = {}\n  bindings.forEach(([key, value, binding]) => {\n    addToTrie(trie, 0, key, value, binding)\n  })\n  return trie\n}\n\nfunction addToTrie (trie, i, key, value, binding) {\n  if (key.length === 0) {\n    throw Error(`${value} has a 0 length key binding`)\n  } else if (i === key.length - 1) {\n    if (trie.hasOwnProperty(key[i])) {\n      throw {\n        message: `${firstLeafValue(\n          trie[key[i]]\n        )} and ${value} have conflicting mapping`,\n        type: 'conflict',\n        command1: trie[key[i]],\n        command2: value\n      }\n    } else {\n      trie[key[i]] = value\n    }\n  } else {\n    if (trie.hasOwnProperty(key[i])) {\n      if (typeof trie[key[i]] === 'object') {\n        addToTrie(trie[key[i]], i + 1, key, value)\n      } else {\n        throw {\n          message: `${trie[key[i]]} and ${value} have conflicting prefix`,\n          type: 'conflict',\n          command1: trie[key[i]],\n          command2: value\n        }\n      }\n    } else {\n      addToTrie((trie[key[i]] = {}), i + 1, key, value)\n    }\n  }\n}\n\nfunction firstLeafValue (trie) {\n  return typeof trie === 'object'\n    ? firstLeafValue(trie[Object.keys(trie)[0]])\n    : trie\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/options/Keybindings/trie.js","import { generateCommandTrie } from './trie'\nimport { getAttributes } from 'lib/util'\nimport { setKeyboardSettings } from 'lib/keys'\n\nexport default (options, config) => {\n  const backgroundOptions = getAttributes(options, ['hintChars'])\n  const clientOptions = getAttributes(options, [\n    'physicalKeys',\n    'ignoreModifierKeys'\n  ])\n  const errors = {}\n  if (options.hintChars.length < 2) {\n    errors.hintChars = 'A minimum of two hint characters must be specified'\n  }\n  setKeyboardSettings(options.physicalKeys, options.ignoreModifierKeys)\n  const keybindings = keybindingsPerMode(options, config)\n  Object.entries(keybindings).forEach(([mode, bindings]) => {\n    try {\n      clientOptions[\n        mode ? `${mode}Bindings` : 'bindings'\n      ] = generateCommandTrie(bindings)\n    } catch (e) {\n      if (e.type === 'conflict') {\n        errors[e.command1] = e.message\n        errors[e.command2] = e.message\n      } else throw e\n    }\n  })\n  return { backgroundOptions, clientOptions, errors }\n}\n\nfunction keybindingsPerMode (options, config) {\n  const keybindings = {}\n  config.forEach(item => {\n    if (item.type === 'keybinding') {\n      const { mode = 'command', key } = item\n      if (keybindings[mode]) {\n        keybindings[mode][key] = options[key]\n      } else {\n        keybindings[mode] = { [key]: options[key] }\n      }\n    }\n  })\n  return keybindings\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/options/Keybindings/index.js","import { getAttributes } from 'lib/util'\n\nexport default (options, config) => {\n  const backgroundOptions = {}\n  const clientOptions = getAttributes(options, [\n    'hintFontSize',\n    'hintUseTargetSize',\n    'hintCSS',\n    'hintNormalCharCSS',\n    'hintActiveCharCSS',\n    'hintHorizontalPlacement',\n    'hintVerticalPlacement'\n  ])\n  const errors = {}\n  if (options.hintUseCustomCSS) {\n    clientOptions.hintCSS = `all: initial; position: absolute; z-index: 999999999999; ${options.hintCSS}`\n  } else {\n    clientOptions.hintCSS = generateHintCSS(options)\n    clientOptions.hintNormalCharCSS = ''\n    clientOptions.hintActiveCharCSS = 'opacity: 0.5'\n  }\n  return { backgroundOptions, clientOptions, errors }\n}\n\n/**\n * Given input settings parameters, generates the CSS used to style link hints\n */\nfunction generateHintCSS ({\n  hintOpacity,\n  hintFontFamily,\n  hintFontWeight,\n  hintHorizontalPadding,\n  hintVerticalPadding,\n  hintBorderWidth,\n  hintFontSize,\n  hintTextColor,\n  hintBackgroundColor,\n  hintBorderColor,\n  hintShadow,\n  hintBorderRadius,\n  hintHorizontalPlacement,\n  hintVerticalPlacement,\n  hintHorizontalTranslation,\n  hintVerticalTranslation\n}) {\n  const translationX =\n    hintHorizontalTranslation +\n    (hintHorizontalPlacement === 'left'\n      ? 0\n      : hintHorizontalPlacement === 'right' ? -100 : -50)\n  const translationY =\n    hintVerticalTranslation +\n    (hintVerticalPlacement === 'top'\n      ? 0\n      : hintVerticalPlacement === 'bottom' ? -100 : -50)\n  return `all: initial;\nposition: absolute;\nz-index: 2147483647;\nopacity: ${hintOpacity};\nfont-family: ${hintFontFamily};\nfont-weight: ${hintFontWeight};\npadding: ${hintVerticalPadding}rem ${hintHorizontalPadding}rem;\nborder: ${hintBorderWidth}px solid;\ntext-align: center;\ntext-decoration: none;\ntext-transform: uppercase;\nvertical-align: middle;\nfont-size: ${hintFontSize}px;\ncolor: ${hintTextColor};\nbackground-color: ${hintBackgroundColor};\nborder-color: ${hintBorderColor};\n${hintShadow\n    ? 'box-shadow: 0 3px 1px -2px rgba(0,0,0,.2), 0 2px 2px 0 rgba(0,0,0,.14), 0 1px 5px 0 rgba(0,0,0,.12);'\n    : ''}\nborder-radius: ${hintBorderRadius}px;\ntransform: translate3d(${translationX}%, ${translationY}%, 0)`\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/options/Appearance/index.js","import transformGeneral from 'options/General'\nimport transformKeybindings from 'options/Keybindings'\nimport transformAppearance from 'options/Appearance'\nimport transformBlacklist from 'options/Blacklist'\nconst transforms = {\n  General: transformGeneral,\n  Keybindings: transformKeybindings,\n  Appearance: transformAppearance,\n  Blacklist: transformBlacklist\n}\nexport const categories = Object.keys(transforms)\n\n/**\n * Given a key-value map of options, applies and merges each per-category transform.\n * @param {{ [key: string]: any }} allOptions\n * @returns {{ backgroundOptions: { [key: string]: any }, clientOptions: { [key: string]: any }, errors: { [key: string]: any } }}\n */\nexport default function transformOptions (allOptions, config) {\n  let allBackgroundOptions = {}\n  let allClientOptions = {}\n  let allErrors = {}\n  Object.entries(transforms).forEach(([category, transform]) => {\n    const { clientOptions, backgroundOptions, errors } = transform(\n      allOptions,\n      config[category]\n    )\n    Object.assign(allClientOptions, clientOptions)\n    Object.assign(allBackgroundOptions, backgroundOptions)\n    Object.assign(allErrors, errors)\n  })\n  return {\n    backgroundOptions: allBackgroundOptions,\n    clientOptions: allClientOptions,\n    errors: allErrors\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/storage/transform.js","import { getAttributes } from 'lib/util'\n\nexport default (options, config) => {\n  const backgroundOptions = getAttributes(options, ['autoActivateHint'])\n  const clientOptions = getAttributes(options, [\n    'enabled',\n    'preventStealFocus',\n    'hintDetectByCursorStyle',\n    'smoothScroll',\n    'scrollStep'\n  ])\n  const errors = {}\n  return { backgroundOptions, clientOptions, errors }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/options/General/index.js","import { getAttributes } from 'lib/util'\n\nexport default (options, config) => {\n  const backgroundOptions = getAttributes(options, ['blacklist'])\n  const clientOptions = getAttributes(options, ['blacklist'])\n  const errors = {}\n  return { backgroundOptions, clientOptions, errors }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/options/Blacklist/index.js","import {\n  storageGet,\n  storageSet,\n  storageRemove,\n  storageClear\n} from 'storage/storage'\nimport { msg } from 'mosi/client'\nimport { categories as installCategories } from 'storage/transform'\nimport { downloadJSON } from 'lib/dom'\nimport compareVersions from 'compare-versions'\n\n// TODO: test this code, lots of room for error, should really have unit tests\n\nexport async function storageInstallProcedure () {\n  try {\n    await storageSet({ ready: false })\n    await createCategories()\n    await createConfig()\n    if (SAKA_DEBUG) await validateConfig()\n    await createBuiltInProfiles()\n    await createCustomProfiles()\n    await createActiveProfiles()\n    await createBuiltInOptions()\n    await storageSet({ ready: true })\n  } catch (e) {\n    console.error(\n      'FATAL ERROR: INSTALLATION FAILED. DELETE THEN REINSTALL THE EXTENSION.',\n      e\n    )\n  }\n}\n\nexport async function storageUpdateProcedure (previousVersion) {\n  try {\n    // order matters: e.g. you must delete the old built-in options using the\n    // built-in profiles already in storage, not the built-in profiles in the update\n    await storageSet({ ready: false })\n    if (compareVersions(previousVersion, '1.16') <= 0) {\n      await storageClear()\n      await storageInstallProcedure()\n    } else {\n      await deleteBuiltInOptions()\n      await deleteBuiltInProfiles()\n      await deleteConfig()\n      await deleteCategories()\n      await createCategories()\n      await createConfig()\n      if (SAKA_DEBUG) await validateConfig()\n      await createBuiltInProfiles()\n      await renameCustomProfilesAndOptions() // if a new built-in profile 'steals' the name of an existing custom profile\n      await correctActiveProfiles() // if the active profile is a deleted built-in profile\n      await createBuiltInOptions()\n      await correctCustomOptions()\n    }\n    await storageSet({ ready: true })\n  } catch (e) {\n    console.error(\n      'FATAL ERROR: UPDATE FAILED. DELETE THEN REINSTALL THE EXTENSION.',\n      e\n    )\n  }\n}\n\n// TODO: proper import validation\nexport async function storeageImportProcedure () {\n  const input = document.createElement('input')\n  input.setAttribute('type', 'file')\n  input.setAttribute('accept', '.json')\n  input.addEventListener('change', e => {\n    const reader = new FileReader()\n    reader.onload = async () => {\n      await storageResetProcedure()\n      const { customProfiles, options } = await storageGet([\n        'customProfiles',\n        'options'\n      ])\n      const { activeProfiles, profiles } = JSON.parse(reader.result)\n      for (const category in profiles) {\n        for (const profile in profiles[category]) {\n          customProfiles[category].push(profile)\n          options[`${category}_${profile}`] = profiles[category][profile]\n        }\n      }\n      await storageSet({ customProfiles, activeProfiles, options })\n      msg('options_page', 'RERENDER')\n    }\n    reader.readAsText(e.target.files[0])\n  })\n  input.click()\n}\n\nexport async function storageExportProcedure () {\n  const { customProfiles, activeProfiles, options } = await storageGet([\n    'customProfiles',\n    'activeProfiles',\n    'options'\n  ])\n  const profiles = {}\n  for (const category in customProfiles) {\n    profiles[category] = {}\n    customProfiles[category].forEach(profile => {\n      profiles[category][profile] = options[`${category}_${profile}`]\n    })\n  }\n  await downloadJSON({ activeProfiles, profiles }, 'saka_key_config.json')\n}\n\nexport async function storageResetProcedure () {\n  await storageClear()\n  await storageInstallProcedure()\n  msg('options_page', 'RERENDER')\n}\n\nasync function createCategories () {\n  await storageSet({ categories: installCategories })\n}\n\nasync function createConfig () {\n  const { categories } = await storageGet('categories')\n  const config = {}\n  for (const category of categories) {\n    const request = await fetch(`/config_${category}.json`)\n    const result = await request.json()\n    config[category] = result.options\n  }\n  await storageSet({ config })\n}\n\n// TODO: define a per-type validation function\nasync function validateConfig () {\n  const { config } = await storageGet('config')\n  const allKeys = {}\n  for (const [category, _config] of Object.entries(config)) {\n    for (const item of _config) {\n      if (!item.hasOwnProperty('type')) {\n        throw Error(\n          `Config validation failed: item ${category}:${item.key ||\n            '[no key]'} has no type`,\n          item\n        )\n      }\n      if (item.hasOwnProperty('key')) {\n        if (allKeys.hasOwnProperty(item.key)) {\n          throw Error(\n            `Config validation failed: two items share the key ${item.key}`\n          )\n        } else {\n          allKeys[item.key] = true\n        }\n        if (!item.hasOwnProperty('default')) {\n          throw Error(\n            `Config validation failed: no default value for key ${item.key}`\n          )\n        }\n      }\n    }\n  }\n}\n\nasync function createBuiltInProfiles () {\n  const { categories } = await storageGet('categories')\n  const builtInProfiles = {}\n  for (const category of categories) {\n    const request = await fetch(`/default_${category}.json`)\n    const { profiles } = await request.json()\n    builtInProfiles[category] = profiles.map(profile => profile.name)\n  }\n  await storageSet({ builtInProfiles })\n}\n\nasync function createCustomProfiles () {\n  const { categories } = await storageGet('categories')\n  const customProfiles = {}\n  for (const category of categories) {\n    customProfiles[category] = []\n  }\n  await storageSet({ customProfiles })\n}\n\nasync function createActiveProfiles () {\n  const { categories } = await storageGet('categories')\n  const activeProfiles = {}\n  for (const category of categories) {\n    activeProfiles[category] = 'default'\n  }\n  await storageSet({ activeProfiles })\n}\n\n/**\n * If options don't exist, creates them using the built-in profiles.\n * If options exist, adds built-in profile options.\n */\nasync function createBuiltInOptions () {\n  const { options = {} } = await storageGet('options')\n  const { categories } = await storageGet('categories')\n  for (const category of categories) {\n    const request = await fetch(`/default_${category}.json`)\n    const { profiles } = await request.json()\n    for (const profile of profiles) {\n      options[`${category}_${profile.name}`] = profile.options\n    }\n  }\n  await storageSet({ options })\n}\n\nasync function deleteBuiltInOptions () {\n  const { categories, options, builtInProfiles } = await storageGet([\n    'categories',\n    'options',\n    'builtInProfiles'\n  ])\n  for (const category of categories) {\n    for (const profile of builtInProfiles[category]) {\n      delete options[`${category}_${profile}`]\n    }\n  }\n  await storageSet({ options })\n}\n\nasync function deleteBuiltInProfiles () {\n  await storageRemove('builtInProfiles')\n}\n\nasync function deleteConfig () {\n  await storageRemove('config')\n}\n\n/**\n * Accounts for the case where a built-in profile introduced in an update conflicts with\n * a custom profile already installed. Renames the custom profile, active profile, and action\n * if a conflic is detected.\n */\nasync function renameCustomProfilesAndOptions () {\n  const {\n    categories,\n    customProfiles,\n    builtInProfiles,\n    activeProfiles,\n    options\n  } = await storageGet([\n    'categories',\n    'customProfiles',\n    'builtInProfiles',\n    'activeProfiles',\n    'options'\n  ])\n  for (const category of categories) {\n    const _builtInProfiles = builtInProfiles[category]\n    let _customProfiles = customProfiles[category]\n    const _activeProfile = activeProfiles[category]\n\n    if (_customProfiles === undefined) {\n      _customProfiles = _builtInProfiles\n    }\n\n    _customProfiles.forEach((customProfile, i) => {\n      if (_builtInProfiles.indexOf(customProfile) !== -1) {\n        // rename custom profile\n        const newProfileName = `${customProfile}_renamed_${Date.now()}`\n        _customProfiles[i] = newProfileName\n        // rename active profile\n        if (_activeProfile === customProfile) {\n          activeProfiles[category] = newProfileName\n        }\n        // rename options\n        options[`${category}_${newProfileName}`] =\n          options[`${category}_${customProfile}`]\n        delete options[`${category}_${customProfile}`]\n      }\n    })\n  }\n  await storageSet({ customProfiles, activeProfiles, options })\n}\n\nasync function deleteCategories () {\n  await storageRemove('categories')\n}\n/**\n * Accounts for the case where the active profile has been deleted\n */\nasync function correctActiveProfiles () {\n  const {\n    categories,\n    activeProfiles,\n    builtInProfiles,\n    customProfiles\n  } = await storageGet([\n    'categories',\n    'activeProfiles',\n    'builtInProfiles',\n    'customProfiles'\n  ])\n  for (const category of categories) {\n    if (customProfiles[category] === undefined) {\n      customProfiles[category] = builtInProfiles[category]\n    }\n    const profiles = [...builtInProfiles[category], ...customProfiles[category]]\n    if (profiles.indexOf(activeProfiles[category]) === -1) {\n      activeProfiles[category] = 'default'\n    }\n  }\n  await storageSet({ activeProfiles })\n}\n\nasync function correctCustomOptions () {\n  const { config, options, categories, customProfiles } = await storageGet([\n    'config',\n    'options',\n    'categories',\n    'customProfiles'\n  ])\n  for (const category of categories) {\n    if (customProfiles[category] === undefined) {\n      customProfiles[category] = []\n    }\n    for (const profile of customProfiles[category]) {\n      const key = `${category}_${profile}`\n      options[key] = correctedOptions(options[key], config[category])\n    }\n  }\n  await storageSet({ options })\n}\n\nfunction correctedOptions (options, config) {\n  const newOptions = {}\n  for (const item of config) {\n    newOptions[item.key] = correctValue(options[item.key], item)\n  }\n  return newOptions\n}\n\n/**\n * If the value conforms to the constraints defined in the config file,\n * returns the value unchanged. Otherwise returns the default value for the option.\n */\nfunction correctValue (value, configItem) {\n  // TODO\n  return value === undefined ? configItem.default : value\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/storage/procedures.js","/* global define */\n(function (root, factory) {\n  /* istanbul ignore next */\n  if (typeof define === 'function' && define.amd) {\n    define([], factory);\n  } else if (typeof exports === 'object') {\n    module.exports = factory();\n  } else {\n    root.compareVersions = factory();\n  }\n}(this, function () {\n\n  var semver = /^v?(?:\\d+)(\\.(?:[x*]|\\d+)(\\.(?:[x*]|\\d+)(\\.(?:[x*]|\\d+))?(?:-[\\da-z\\-]+(?:\\.[\\da-z\\-]+)*)?(?:\\+[\\da-z\\-]+(?:\\.[\\da-z\\-]+)*)?)?)?$/i;\n\n  function indexOrEnd(str, q) {\n    return str.indexOf(q) === -1 ? str.length : str.indexOf(q);\n  }\n\n  function split(v) {\n    var c = v.replace(/^v/, '').replace(/\\+.*$/, '');\n    var patchIndex = indexOrEnd(c, '-');\n    var arr = c.substring(0, patchIndex).split('.');\n    arr.push(c.substring(patchIndex + 1));\n    return arr;\n  }\n\n  function tryParse(v) {\n    return isNaN(Number(v)) ? v : Number(v);\n  }\n\n  function validate(version) {\n    if (typeof version !== 'string') {\n      throw new TypeError('Invalid argument expected string');\n    }\n    if (!semver.test(version)) {\n      throw new Error('Invalid argument not valid semver (\\''+version+'\\' received)');\n    }\n  }\n\n  return function compareVersions(v1, v2) {\n    [v1, v2].forEach(validate);\n\n    var s1 = split(v1);\n    var s2 = split(v2);\n\n    for (var i = 0; i < Math.max(s1.length - 1, s2.length - 1); i++) {\n      var n1 = parseInt(s1[i] || 0, 10);\n      var n2 = parseInt(s2[i] || 0, 10);\n\n      if (n1 > n2) return 1;\n      if (n2 > n1) return -1;\n    }\n\n    var sp1 = s1[s1.length - 1];\n    var sp2 = s2[s2.length - 1];\n\n    if (sp1 && sp2) {\n      var p1 = sp1.split('.').map(tryParse);\n      var p2 = sp2.split('.').map(tryParse);\n\n      for (i = 0; i < Math.max(p1.length, p2.length); i++) {\n        if (p1[i] === undefined || typeof p2[i] === 'string' && typeof p1[i] === 'number') return -1;\n        if (p2[i] === undefined || typeof p1[i] === 'string' && typeof p2[i] === 'number') return 1;\n\n        if (p1[i] > p2[i]) return 1;\n        if (p2[i] > p1[i]) return -1;\n      }\n    } else if (sp1 || sp2) {\n      return sp1 ? -1 : 1;\n    }\n\n    return 0;\n  };\n\n}));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/compare-versions/index.js\n// module id = 32\n// module chunks = 0 4","import { msg, meta } from 'mosi/core'\nimport { getAllActiveProfileOptions, storageGet } from 'storage/storage'\nimport transformOptions from 'storage/transform'\nimport {\n  storageInstallProcedure,\n  storageUpdateProcedure\n} from 'storage/procedures'\n\nexport let modes = {}\n\nconst defaultModeObject = {\n  onOptionsChange: () => {},\n  messages: {}\n}\n\nexport function initModes (availableModes, actions) {\n  modes = availableModes\n  Object.entries(availableModes).map(([name, mode]) => {\n    modes[name] = Object.assign({}, defaultModeObject, mode)\n    Object.assign(actions, modes[name].messages)\n  })\n}\n\nexport async function loadClient (_, src) {\n  const { sender: { frameId, tab: { index: tabIndex, id: tabId } } } = meta(src)\n  // tabIndex === -1 indicates the tab is preloaded but not a full tab\n  // attempting to execute into it is an error\n  // http://stackoverflow.com/questions/43665470/cannot-call-chrome-tabs-executescript-into-preloaded-tab-is-this-a-bug-in-chr\n  if (tabIndex === -1) {\n    if (SAKA_DEBUG) {\n      console.log(\n        `NOT loading client into preloaded tab: frame: ${frameId}, tab: ${tabId}`\n      )\n    }\n  } else {\n    if (SAKA_DEBUG) {\n      console.log(`Loading client: frame: ${frameId}, tab: ${tabId}`)\n    }\n    await browser.tabs.executeScript(tabId, {\n      file: '/content_script.js',\n      frameId,\n      runAt: 'document_start',\n      matchAboutBlank: true\n    })\n  }\n}\n\n/** Reloads all Saka Clients, called on extension updates */\nexport async function reloadAllClients () {\n  const tabs = await browser.tabs.query({})\n  for (const tab of tabs) {\n    try {\n      browser.tabs.executeScript(tab.id, {\n        file: '/content_script_loader.js',\n        allFrames: true,\n        runAt: 'document_start',\n        matchAboutBlank: true\n      })\n    } catch (e) {}\n  }\n}\n\n// Requests for the full Saka Client by the client loaders of preloaded tabs are\n// denied because attempting to execute within them would cause errors.\n// http://stackoverflow.com/questions/43665470/cannot-call-chrome-tabs-executescript-into-preloaded-tab-is-this-a-bug-in-chr\n// Instead, the background page listens for the tabs.onReplaced event and executes\n// content_script_loader.js into all frames, which then launches another request for\n// the full Saka Client\nif (SAKA_PLATFORM === 'chrome') {\n  chrome.tabs.onReplaced.addListener((addedTabId, removedTabId) => {\n    if (SAKA_DEBUG) {\n      console.log(\n        `Tab id changed from ${removedTabId} to ${addedTabId}. Reloading content_script_loader.js`\n      )\n    }\n    browser.tabs.executeScript(addedTabId, {\n      file: '/content_script_loader.js',\n      allFrames: true,\n      runAt: 'document_start',\n      matchAboutBlank: true\n    })\n  })\n}\n\nlet cachedClientOptions\n\nexport function clientOptions (arg, src) {\n  msg(src, 'clientOptions', cachedClientOptions)\n}\n\nasync function onOptionsChange () {\n  if ((await storageGet('ready')).ready) {\n    const { backgroundOptions, clientOptions } = transformOptions(\n      await getAllActiveProfileOptions(),\n      (await storageGet('config')).config\n    )\n    Object.values(modes).forEach(mode => {\n      mode.onOptionsChange(backgroundOptions)\n    })\n    cachedClientOptions = clientOptions\n    msg('client', 'clientOptions', clientOptions)\n  }\n}\n\nchrome.storage.onChanged.addListener(onOptionsChange)\n\n/**\n * Sets up startup listener, sets up install listener, and executes setup routine\n * When an extension is installed, only the install listener is executed, not the\n * startup listener. The startup listener is called only when chrome is opened.\n * The install listener can be called for a number of reasons.\n * A setup action that should always run whenever the background page starts\n * should NOT be placed in the startup listener.\n */\nexport async function setup () {\n  await initInstallListeners()\n  await onOptionsChange()\n}\n\nfunction initInstallListeners () {\n  chrome.runtime.onInstalled.addListener(\n    async ({ reason, previousVersion }) => {\n      if (SAKA_DEBUG) console.log('install event: ' + reason)\n      switch (reason) {\n        case 'install':\n          await storageInstallProcedure()\n          await onOptionsChange()\n          await reloadAllClients()\n          chrome.tabs.create({ url: 'info.html' })\n          break\n        case 'update':\n          await storageUpdateProcedure(previousVersion)\n          await onOptionsChange()\n          await reloadAllClients()\n          // TODO: Replace with Notification\n          // chrome.tabs.create({ url: 'info.html' });\n          break\n        case 'chrome_update':\n        case 'shared_module_update':\n        default:\n          break\n      }\n    }\n  )\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/background_page/modes.js","import { posMod } from 'lib/util'\n\n/** Activate the tab to the right of the active tab of the current window */\nexport async function nextTab () {\n  const tabs = await browser.tabs.query({ currentWindow: true })\n  const activeTabIndex = tabs.findIndex(tab => tab.active)\n  const nextTabId = tabs[posMod(activeTabIndex + 1, tabs.length)].id\n  await browser.tabs.update(nextTabId, { active: true })\n}\n\n/** Activate the tab to the left of the active tab of the current window */\nexport async function previousTab () {\n  const tabs = await browser.tabs.query({ currentWindow: true })\n  const activeTabIndex = tabs.findIndex(tab => tab.active)\n  const previousTabId = tabs[posMod(activeTabIndex - 1, tabs.length)].id\n  await browser.tabs.update(previousTabId, { active: true })\n}\n\n/** Activate the first tab of the current window */\nexport async function firstTab () {\n  const tabs = await browser.tabs.query({ currentWindow: true })\n  const firstTabId = tabs[0].id\n  await browser.tabs.update(firstTabId, { active: true })\n}\n\n/** Activate the last tab of the current window */\nexport async function lastTab () {\n  const tabs = await browser.tabs.query({ currentWindow: true })\n  const lastTabId = tabs[tabs.length - 1].id\n  await browser.tabs.update(lastTabId, { active: true })\n}\n\n/** Move the active tab of the current window left */\nexport async function moveTabLeft () {\n  const [tab] = await browser.tabs.query({ currentWindow: true, active: true })\n  await browser.tabs.move(tab.id, { index: tab.index - 1 })\n}\n\n/** Move the active tab of the current window right */\nexport async function moveTabRight () {\n  const tabs = await browser.tabs.query({ currentWindow: true })\n  const activeTabIndex = tabs.findIndex(tab => tab.active)\n  const nextTabIndex = posMod(activeTabIndex + 1, tabs.length)\n  await browser.tabs.move(tabs[activeTabIndex].id, { index: nextTabIndex })\n}\n\n/** Move the active tab of the current window to the far left */\nexport async function moveTabFirst () {\n  const [tab] = await browser.tabs.query({ currentWindow: true, active: true })\n  await browser.tabs.move(tab.id, { index: 0 })\n}\n\n/** Move the active tab of the current window to the far right */\nexport async function moveTabLast () {\n  const [tab] = await browser.tabs.query({ currentWindow: true, active: true })\n  await browser.tabs.move(tab.id, { index: -1 })\n}\n\n/** Move the active tab of the current window to a new window */\nexport async function moveTabNewWindow () {\n  const [tab] = await browser.tabs.query({ currentWindow: true, active: true })\n  await browser.windows.create({ tabId: tab.id })\n}\n\n/** Close the active tab of the current window */\nexport async function closeTab () {\n  const [tab] = await browser.tabs.query({ currentWindow: true, active: true })\n  await browser.tabs.remove(tab.id)\n}\n\n/** Close all tabs of the current window except the active tab */\nexport async function closeOtherTabs () {\n  const tabs = await browser.tabs.query({ currentWindow: true })\n  await Promise.all(\n    tabs.map(async tab => {\n      if (!tab.active) await browser.tabs.remove(tab.id)\n    })\n  )\n}\n\n/** Close all tabs to the right of the active tab of the current window */\nexport async function closeRightTabs () {\n  const tabs = await browser.tabs.query({ currentWindow: true })\n  const activeTabIndex = tabs.findIndex(tab => tab.active)\n  await Promise.all(\n    tabs.slice(activeTabIndex + 1).map(async tab => {\n      await browser.tabs.remove(tab.id)\n    })\n  )\n}\n\n/** Close all tabs to the left of the active tab of the current window */\nexport async function closeLeftTabs () {\n  const tabs = await browser.tabs.query({ currentWindow: true })\n  const activeTabIndex = tabs.findIndex(tab => tab.active)\n  await Promise.all(\n    tabs.slice(0, activeTabIndex).map(async tab => {\n      await browser.tabs.remove(tab.id)\n    })\n  )\n}\n\n/** Create and activate a new tab */\nexport async function newTab () {\n  await browser.tabs.create({})\n}\n\n/** Reopen and activate the last closed tab */\nexport async function restoreTab () {\n  await browser.sessions.restore()\n}\n\n/** Duplicate and activate the active tab of the current window */\nexport async function duplicateTab () {\n  const [tab] = await browser.tabs.query({ currentWindow: true, active: true })\n  await browser.tabs.duplicate(tab.id)\n}\n\n/** Create a new window */\nexport async function newWindow () {\n  await browser.windows.create()\n}\n\n/** Create a new incognito window */\nexport async function newIncognitoWindow () {\n  await browser.windows.create({ incognito: true })\n}\n\n/** Activate the next window */\nexport async function switchWindow () {\n  // TODO: Implement\n  console.error('switchWindow not implemented')\n}\n\nlet zoomStep = 10 // for 10%\n\n/** Zoom in the active tab of the current window */\nexport async function zoomIn () {\n  const [tab] = await browser.tabs.query({ currentWindow: true, active: true })\n  const zoomFactor = await browser.tabs.getZoom()\n  await browser.tabs.setZoom(tab.id, Math.min(zoomFactor + zoomStep / 100, 3.0))\n}\n\n/** Zoom out the active tab of the current window */\nexport async function zoomOut () {\n  const [tab] = await browser.tabs.query({ currentWindow: true, active: true })\n  const zoomFactor = await browser.tabs.getZoom()\n  await browser.tabs.setZoom(tab.id, Math.max(zoomFactor - zoomStep / 100, 0.3))\n}\n\n/** Reset the zoom of the active tab of the current window */\nexport async function zoomReset () {\n  const [tab] = await browser.tabs.query({ currentWindow: true, active: true })\n  await browser.tabs.setZoom(tab.id, 0)\n}\n\n/** Refresh the active tab of the current window */\nexport async function refreshTab () {\n  const [tab] = await browser.tabs.query({ currentWindow: true, active: true })\n  await browser.tabs.reload(tab.id)\n}\n\n/** Refresh all tabs of the current window */\nexport async function refreshAllTabs () {\n  const tabs = await browser.tabs.query({ currentWindow: true })\n  await Promise.all(\n    tabs.map(async tab => {\n      await browser.tabs.reload(tab.id)\n    })\n  )\n}\n\n/** Hard refreshes the active tab of the current window */\nexport async function hardRefreshTab () {\n  const [tab] = await browser.tabs.query({ currentWindow: true, active: true })\n  await browser.tabs.reload(tab.id, { bypassCache: true })\n}\n\n/** Toggle the mute state of the active tab of the current window */\nexport async function toggleMuteTab () {\n  const [tab] = await browser.tabs.query({ currentWindow: true, active: true })\n  await browser.tabs.update(tab.id, { muted: !tab.mutedInfo.muted })\n}\n\nlet muted = false\n\n/** Mute all tabs of all windows */\nexport async function toggleMuteAllTabs () {\n  muted = !muted\n  const tabs = await browser.tabs.query({})\n  await Promise.all(\n    tabs.map(async tab => {\n      await browser.tabs.update(tab.id, { muted })\n    })\n  )\n}\n\n/** Toggle the pin state of the active tab of the current window */\nexport async function togglePinTab () {\n  const [tab] = await browser.tabs.query({ currentWindow: true, active: true })\n  await browser.tabs.update(tab.id, { pinned: !tab.pinned })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/modes/command/background/commands/tab.js","import { searchURL } from 'lib/url'\nimport { paste } from 'lib/dom'\n\nexport async function clipboardCurrentTab () {\n  await browser.tabs.update({ url: searchURL(paste()) })\n}\n\nexport async function clipboardBackgroundTab () {\n  await browser.tabs.create({ url: searchURL(paste()), active: false })\n}\n\nexport async function clipboardForegroundTab () {\n  await browser.tabs.create({ url: searchURL(paste()) })\n}\n\nexport async function clipboardNewWindow () {\n  await browser.windows.create({ url: searchURL(paste()) })\n}\n\nexport async function clipboardIncognitoWindow () {\n  await browser.windows.create({ url: searchURL(paste()), incognito: true })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/modes/command/background/commands/clipboard.js","export function generateHintStrings (characters, count) {\n  const hints = ['']\n  let offset = 0\n  while (hints.length - offset < count || hints.length === 1) {\n    const hint = hints[offset++]\n    for (const c of characters) {\n      hints.push(hint + c)\n    }\n  }\n  return hints.slice(offset, offset + count)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/modes/hints/background/hintStrings.js","import { Node, Transactions, DEFAULT_TIMEOUT } from './node';\nclass Connections {\n  constructor () {\n    this.connectionsByPort = new Map();\n    this.connectionsById = new Map();\n    this.nextId = 2;\n        /** Adds new connection, returning its id */\n    this.add = (port, subs, onDisconnect) => {\n            /** browser action, page actions, devtools won't have tabId or frameId */\n      const sender = port.sender;\n      let tabId;\n      if (sender.tab) { tabId = sender.tab.id; }\n      const frameId = sender.frameId;\n            /** client ids start at 2: 0 refers to self, 1 refers to core */\n      const id = this.nextId++;\n      const transactions = new Transactions();\n      const connection = { port, id, subs, onDisconnect, tabId, frameId, transactions, sender, data: {} };\n      this.connectionsByPort.set(port, connection);\n      this.connectionsById.set(id, connection);\n      return id;\n    };\n    this.remove = (port) => {\n      const connection = this.connectionsByPort.get(port);\n            // This code will clean up a connections transactions on removal, consider adding it back\n            // instead of relying on timeouts.\n            // const transactions = connection.transactions.transactions;\n            // for (const tid in transactions) {\n            //     connection.transactions.delete(tid);\n            // }\n      this.connectionsById.delete(connection.id);\n      this.connectionsByPort.delete(port);\n    };\n        /** execute callback in context of a temporary connection, used for light-client */\n    this.withTmpConnection = async (sender, callback) => {\n      let tabId;\n      if (sender.tab) { tabId = sender.tab.id; }\n      const frameId = sender.frameId;\n      const id = this.nextId++;\n      const transactions = new Transactions();\n      const connection = { id, subs: [], onDisconnect: [], tabId, frameId, transactions, sender, data: {} };\n      this.connectionsById.set(id, connection);\n      await callback(id);\n      this.connectionsById.delete(id);\n    };\n    this.getByPort = (port) => this.connectionsByPort.get(port);\n    this.getById = (id) => this.connectionsById.get(id);\n  }\n}\nclass Core extends Node {\n  constructor () {\n    super();\n    this.connections = new Connections();\n        /**\n         * The background page doubles as the Communication Administrator. It must:\n         * 1. Run its own onConnect actions on init.\n         * 2. Run every other node's onConnect actions when they connect.\n         * 3. Run every other node's onDisconnect actions when they disconnect.\n         * 4. Never execute its own onDisconnect handlers because it should never disconnect.\n         * 5. Maintain information about itself.\n         * 6. Maintain information about active connections.\n         */\n    this.init = ({ subscriptions = [], onConnect = [], onDisconnect = [], actions, log = false }) => {\n      this.initLogging(log);\n      this.subscriptions = subscriptions;\n      this.actions = actions;\n      chrome.runtime.onConnect.addListener((port) => {\n        const { subs, onConnect: onC, onDisconnect: onD } = JSON.parse(port.name);\n        const id = this.connections.add(port, subs, onD);\n        port.onDisconnect.addListener(this.disconnectListener);\n        port.onMessage.addListener(this.messageListener);\n        this.executeOnConnectionActions(id, onC);\n      });\n      this.executeOnConnectionActions(0, onConnect);\n    };\n    this.executeOnConnectionActions = (src, actionDetails) => {\n      actionDetails.forEach(({ action, arg, dst = 0 }) => {\n        this._msg(src, dst, action, arg);\n      });\n    };\n    this.getTargets = (src, dst) => {\n      let targetSelf = false;\n      let targets = [];\n      if (typeof dst === 'number') {\n        if (dst === 0 || dst === 1) {\n          targetSelf = true;\n        } else {\n          const target = this.connections.getById(dst);\n          if (!target) {\n            console.error('ERROR: attempted to message non-existent client');\n          } else if (target.closed) {\n            console.error('ERROR: attempted to message over closed connection');\n          } else {\n            targets = [target];\n          }\n        }\n      } else if (typeof dst === 'string') {\n        targetSelf = this.subscriptions.includes(dst);\n        targets = this.getStringTargets(src, dst);\n      } else {\n        console.error('ERROR: dst type is invalid');\n      }\n      return [targetSelf, targets];\n    };\n        /**\n         * If the destination includes the current node, execute the action locally.\n         * Also send an action message to every other destination node.\n         * TODO: CLEAN THIS UP\n         */\n    this._msg = (src, dst, action, arg) => {\n      const [targetSelf, targets] = this.getTargets(src, dst);\n      if (targetSelf) { this.actionHandler(action, arg, src); }\n      targets.forEach(({ port }) => {\n        if (port) {\n          this.log('Tx', 'msg', src, dst, action, arg);\n          port.postMessage({ t: 'msg', src, dst, action, arg });\n        } else {\n          throw Error('No messaging light-clients');\n        }\n      });\n    };\n    this.msg = this._msg.bind(undefined, 1);\n        /**\n         * A destination is composed of multiple subdestinations separated by semicolons.\n         * A connection receives a message if it is part of any subdestination.\n         * A subdestination is composed of multiple conditions separated by periods.\n         * A connection is part of a subdestination if it satisfies all its conditions.\n         * This is conceptually akin to a conjunctive normal form (OR of AND) boolean formula.\n         * getStringTargets should not include the local node as that is handled by a separate\n         * local action handler.\n         */\n    this.getStringTargets = (src, dst) => {\n            /** Returns true if the given connection is part of the destination, else false */\n      const predicate = (connection) => {\n        if (connection.closed) { return false; }\n        for (const subDst of dst.split('|')) {\n          const allConditionsMet = subDst.split('&').map((condition) => {\n            if (connection.subs.includes(condition)) {\n              return true;\n            }\n            if (condition === 'topFrame') {\n              return connection.frameId === 0;\n            }\n            if (condition === 'childFrames') {\n              return connection.frameId !== 0;\n            }\n            if (condition === 'otherFrames') {\n              return connection.frameId !== this.connections.getById(src).frameId;\n            }\n            if (condition === 'thisTab') {\n              return connection.tabId === this.connections.getById(src).tabId;\n            }\n            if (condition === 'other') {\n              return connection.id !== this.connections.getById(src).id;\n            }\n            const tabCondition = condition.match(/tab\\[(\\d+)\\]/);\n            if (tabCondition) {\n              return connection.tabId === parseInt(tabCondition[1], 10);\n            }\n            const frameCondition = condition.match(/frame\\[(\\d+)\\]/);\n            if (frameCondition) {\n              return connection.frameId === parseInt(frameCondition[1], 10);\n            }\n            const idCondition = condition.match(/id\\[(\\d+)\\]/);\n            if (idCondition) {\n              return connection.id === parseInt(idCondition[1], 10);\n            }\n            return false;\n          }).every((conditionMet) => conditionMet);\n          if (allConditionsMet) { return true; }\n        }\n        return false;\n      };\n            // TODO: review perfomance cost of array conversion, perhaps rewrite to avoid conversion\n      return [...this.connections.connectionsById.values()].filter(predicate);\n    };\n    this._getLocal = async (src, action, arg) => {\n      try {\n        return { id: 1, v: await this.actionHandler(action, arg, src) };\n      } catch (error) {\n        return { id: 1, e: error };\n      }\n    };\n    this._getRemote = (connection, src, action, arg, timeout) => {\n      return new Promise((resolve, reject) => {\n        const tid = connection.transactions.new(resolve, reject, timeout);\n        if (connection.port) {\n          this.log('Tx', 'get', src, connection.id, action, arg, tid);\n          connection.port.postMessage({ t: 'get', src, dst: connection.id, action, arg, tid });\n        } else {\n          throw Error('No messaging light-clients');\n        }\n      });\n    };\n    this._get = (src, dst, action, arg, timeout = DEFAULT_TIMEOUT) => {\n      const [targetSelf, targets] = this.getTargets(src, dst);\n      const localResult = (targetSelf)\n                ? [this._getLocal(src, action, arg)]\n                : [];\n      const remoteResults = targets.map((target) => {\n        return this._getRemote(target, src, action, arg, timeout);\n      });\n            // TODO: Proper Promise handling (don't fail if any fails)\n      try {\n        return Promise.all([...localResult, ...remoteResults]);\n      } catch (e) {\n        console.error(e, 'connections: ', this.connections);\n        return Promise.resolve([]);\n      }\n    };\n    this.get = this._get.bind(undefined, 1);\n        /**\n         * Executes onDisconnt actions and deletes data associated with connection.\n         * Connection is marked as closed so that no messages are sent to it when executing\n         * onDisconnect actions.\n         */\n    this.disconnectListener = (port) => {\n      const connection = this.connections.getByPort(port);\n      connection.closed = true;\n      this.executeOnConnectionActions(connection.id, connection.onDisconnect);\n      this.connections.remove(port);\n    };\n        /**\n         * Handles messages on receipt by calling the appropriate internal function\n         */\n    this.messageListener = ({ src, dst, t, action, arg, tid, res, timeout }, port) => {\n      if (src === undefined) { src = this.connections.getByPort(port).id; }\n      switch (t) {\n        case 'msg':\n          this.log('Rx', 'msg', src, dst, action, arg);\n          this._msg(src, dst, action, arg);\n          break;\n        case 'get':\n          this.log('Rx', 'get', src, dst, action, arg, tid);\n          this._get(src, dst, action, arg, timeout).then((result) => {\n            this.log('Tx', 'rsp', src, dst, action, result, tid);\n            port.postMessage({ t: 'rsp', src: dst, dst: src, action, res: result, tid });\n          }).catch((e) => {\n            this.log('Tx', 'rsp', src, dst, action, { e }, tid);\n            port.postMessage({ t: 'rsp', src: dst, dst: src, action, res: { e }, tid });\n          });\n          break;\n        case 'rsp':\n          this.log('Rx', 'rsp', src, dst, action, res, tid);\n          const connection = this.connections.getByPort(port);\n          if (connection) {\n            connection.transactions.complete(tid, res);\n          }\n                    // the code may get here if a transaction is received over a connection\n                    // that subsequently closed. Do nothing, a timeout will trigger the\n                    // reject handler automatically.\n          break;\n        default:\n          throw Error(`Invalid message class: ${t}`);\n      }\n    };\n    this.meta = (connectionId) => {\n      const connection = this.connections.getById(connectionId);\n      if (connection) {\n        return {\n          frameId: connection.frameId,\n          tabId: connection.tabId,\n          sender: connection.sender,\n          subs: connection.subs,\n          data: connection.data\n        };\n      }\n      return undefined;\n    };\n        /** adds a listener for light-client messages */\n    chrome.runtime.onMessage.addListener(({ mosi_lw_msg, dst, action, arg }, sender) => {\n      if (mosi_lw_msg) {\n        this.log('Rx', 'msg', 'lw_client', dst, action, arg);\n        this.connections.withTmpConnection(sender, async (connectionId) => {\n          await this._msg(connectionId, dst, action, arg);\n        });\n      }\n    });\n  }\n}\nconst node = new Core();\nconst init = node.init;\nconst msg = node.msg;\nconst get = node.get;\nconst meta = node.meta;\nexport { init, msg, meta, get };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/mosi/core.js\n// module id = null\n// module chunks = ","import * as tabCommands from './commands/tab'\nimport * as clipboardCommands from './commands/clipboard'\n\nexport default {\n  messages: {\n    ...tabCommands,\n    ...clipboardCommands\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/modes/command/background/index.js","import { msg, get, meta } from 'mosi/core'\nimport { generateHintStrings } from './hintStrings'\n\nlet hintChars = 'adsfghjkl;'\nlet autoActivateHint = false\n\nexport default {\n  onOptionsChange: options => {\n    hintChars = options.hintChars.length >= 2 ? options.hintChars : 'bad'\n    autoActivateHint = options.autoActivateHint\n  },\n  messages: {\n    findHints: async (config, src) => {\n      // Gather the number of hintable elements in each frame\n      const currentTabTarget = `tab[${meta(src).tabId}]|id[${src}]`\n      const hintsPerFrame = await get(currentTabTarget, 'findHints', config)\n      const totalHints = hintsPerFrame.reduce((total, { v }) => total + v, 0)\n      // If no hints, immediately exit Hints mode\n      if (totalHints === 0) {\n        msg(currentTabTarget, 'exitHintsMode')\n        // If exactly one hint, immediately activate it (if autoactivation enabled by user)\n      } else if (totalHints === 1 && autoActivateHint) {\n        const { id } = hintsPerFrame.find(({ v, id }) => v === 1)\n        const [{ v: nextMode }] = await get(id, 'activateFirstHint')\n        msg(currentTabTarget, 'exitHintsMode', nextMode)\n        // If multiple hints, trigger hint rendering\n      } else {\n        const hintStrings = generateHintStrings(hintChars, totalHints)\n        let offset = 0\n        hintsPerFrame.forEach(({ id, v }) => {\n          const nextOffset = offset + v\n          msg(id, 'renderHints', hintStrings.slice(offset, nextOffset))\n          offset = nextOffset\n        })\n      }\n    },\n    processKey: async (event, src) => {\n      const currentTabTarget = `tab[${meta(src).tabId}]|id[${src}]`\n      try {\n        const results = await get(currentTabTarget, 'advanceHints', event)\n        if (results.every(({ v }) => v === 'Filtered')) {\n          msg(currentTabTarget, 'exitHintsMode')\n          return\n        }\n        const nextMode = results.find(\n          ({ v }) => v !== 'Same' && v !== 'Filtered' && v !== undefined\n        )\n        if (nextMode) {\n          msg(currentTabTarget, 'exitHintsMode', nextMode.v)\n        }\n      } catch (e) {}\n    },\n    openLinkInIncognitoWindow: url => {\n      // TODO: consider more robust URL verification like Vimium's\n      browser.windows.create({ url, incognito: true })\n    },\n    // Needed to activate links on firefox because it ignores keyboard modifiers\n    // or doesn't execute default behaviors on click events\n    ...(SAKA_PLATFORM === 'chrome'\n      ? {}\n      : {\n        openLinkInBackgroundTab: url => {\n          browser.tabs.create({ url, active: false })\n        },\n        openLinkInForegroundTab: url => {\n          browser.tabs.create({ url, active: true })\n        },\n        openLinkInNewWindow: url => {\n          browser.windows.create({ url })\n        }\n      })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/modes/hints/background/index.js","import 'lib/browser_polyfill'\nimport { init } from 'mosi/core'\nimport {\n  loadClient,\n  initModes,\n  setup,\n  clientOptions\n} from 'background_page/modes'\nimport Command from 'modes/command/background'\nimport Hints from 'modes/hints/background'\n\nif (SAKA_DEBUG) {\n  console.log('background page initialize begin')\n}\n\n// messaging endpoints, see Mosi (https://github.com/eejdoowad/mosi)\nconst actions = {\n  loadClient,\n  clientOptions\n}\n\n// initialize messaging system\ninit({\n  log: SAKA_DEBUG,\n  actions\n})\n\ninitModes(\n  {\n    Command,\n    Hints\n  },\n  actions\n)\n\nsetup()\n\nif (SAKA_DEBUG) {\n  console.log(`background page initialized for version ${SAKA_VERSION}`)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/background_page/index.js"],"sourceRoot":""}