(function(e){function t(s){if(n[s])return n[s].exports;var i=n[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,s){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:s})},t.n=function(e){var n=e&&e.__esModule?function(){return e['default']}:function(){return e};return t.d(n,'a',n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p='',t(t.s=37)})([,,,function(e,t){'use strict';function n(e){if(e.disabled||e.readonly)return!1;switch(e.type){case void 0:case'text':case'search':case'email':case'url':case'number':case'password':case'date':case'tel':return!0;}return!1}function s(e=document){const t=e.activeElement,n=t&&t.shadowRoot;return n?s(n):t}t.e=function(e){if(e){switch(e.nodeName){case'INPUT':return n(e);case'TEXTAREA':case'OBJECT':return!0;}switch(!0){case'TRUE'===e.contentEditable.toUpperCase():case'application'===e.role:return!0;}}return!1},t.b=s,t.f=function(e,t,n={}){let s;'hover'===t?s=['mouseover','mouseenter','mousemove']:'unhover'===t?s=['mousemove','mouseout','mouseleave']:'click'===t?s=['mouseover','mousedown','mouseup','click']:void 0;s.forEach((t)=>{const s=new MouseEvent(t,i({bubbles:!0,cancelable:!0,view:window,detail:1},n));e.dispatchEvent(s)})},t.g=function(e){return e===a?'fullscreenchange':e},t.a=function(e){const t=document.createElement('textarea');t.style='position:fixed;right:0',t.value=e,document.body.appendChild(t),t.select(),document.execCommand('Copy'),document.body.removeChild(t)},t.h=function(){const e=document.createElement('textarea');e.style='position:fixed;right:0',document.body.appendChild(e),e.focus(),document.execCommand('Paste');const t=e.value;return document.body.removeChild(e),t},t.c=async function(e,t){const n=URL.createObjectURL(new Blob([JSON.stringify(e,null,2)],{type:'data:application/json;charset=utf-8'}));await browser.downloads.download({url:n,filename:t,saveAs:!0})};var i=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var s in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e};const a='webkitfullscreenchange';t.d=a},function(e,t,n){'use strict';function s(e){const{shiftKey:t,ctrlKey:n,altKey:s,metaKey:i}=e;return`${t?'s':''}${n?'c':''}${s?'a':''}${i?'m':''}`}function i(e){const{shiftKey:t,ctrlKey:n,altKey:s,metaKey:i}=e;return`${t?'shift-':''}${n?'ctrl-':''}${s?'alt-':''}${i?'meta-':''}`}function a(e){const{ctrlKey:t,altKey:n,metaKey:s}=e;return`${t?'ctrl-':''}${n?'alt-':''}${s?'meta-':''}`}t.e=function(e,t){g=e,d=t},t.c=function(e){switch(e.key){case'Shift':case'Control':case'Alt':case'Meta':return!0;default:return!1;}},t.d=function(e,t=g,n=d){return t?`${s(e)}_${e.code}`:n?`${e.key}`:`${s(e)}_${e.key}`},t.a=function(e,t=g,n=d){return t?`${i(e)}${o.a[e.code]?o.a[e.code].value:e.code}`:n?`${e.key}`:`${a(e)}${e.key}`},t.g=function(e){return e&&e.key&&'string'==typeof e.key&&e.code&&'string'==typeof e.code&&(!e.hasOwnProperty('shiftKey')||e.shiftKey&&'boolean'==typeof e.shiftKey)&&(!e.hasOwnProperty('ctrlKey')||e.ctrlKey&&'boolean'==typeof e.ctrlKey)&&(!e.hasOwnProperty('altKey')||e.altKey&&'boolean'==typeof e.altKey)&&(!e.hasOwnProperty('metaKey')||e.metaKey&&'boolean'==typeof e.metaKey)},t.f=function({key:e,code:t,ctrlKey:n,altKey:s,metaKey:i,shiftKey:a,repeat:r}){return{key:e,code:t,ctrlKey:n,altKey:s,metaKey:i,shiftKey:a,repeat:r}};var r=n(11),o=n.n(r);const c=-1!==navigator.appVersion.indexOf('Mac');t.b=c;let g=!0,d=!1},function(e,t,n){'use strict';n.d(t,'a',function(){return r}),n.d(t,'b',function(){return o});var s=n(9);class i extends s.b{constructor(){super(...arguments),this.timeout=1e3,this.transactions=new s.c,this.init=({subscriptions:n=[],onConnect:s=[],onDisconnect:i=[],actions:e,log:a=!1,onClientDisconnect:t})=>{this.initLogging(a),this.subscriptions=n,this.actions=e,this.onConnect=s,this.onDisconnect=i,this.onClientDisconnect=t,this.connect(),window.addEventListener('beforeunload',()=>{this.port.disconnect()})},this.connect=()=>{const{subscriptions:e,onConnect:t,onDisconnect:n}=this,s={name:JSON.stringify({subs:e,onConnect:t,onDisconnect:n})};this.port=chrome.runtime.connect(s),this.port.onDisconnect.addListener(this.disconnectListener),this.port.onMessage.addListener(this.messageListener)},this.msg=(e,t,n)=>{0===e?this.actionHandler(t,n,0):(this.log('Tx','msg',0,e,t,n),this.port.postMessage({t:'msg',dst:e,action:t,arg:n}))},this._getLocal=async(e,t,n,s)=>{try{return{id:e,v:await this.actionHandler(n,s,t)}}catch(t){return{id:e,e:t}}},this._getRemote=(e,t,n,s)=>new Promise((i,a)=>{const r=this.transactions.new(i,a,s);this.log('Tx','get',0,e,t,n,r),this.port.postMessage({t:'get',dst:e,action:t,arg:n,tid:r,timeout:s})}),this.get=async(e,t,n,i=s.a)=>0===e?[await this._getLocal(0,0,t,n)]:await this._getRemote(e,t,n,i),this.disconnectListener=()=>{this.onClientDisconnect&&this.onClientDisconnect()},this.messageListener=({src:n,dst:s,t:e,action:t,arg:i,tid:a,res:r})=>{switch(e){case'msg':this.log('Rx','msg',n,s,t,i),this.actionHandler(t,i,n);break;case'get':this.log('Rx','get',n,s,t,i,a),this._getLocal(s,n,t,i).then((e)=>{try{this.log('Tx','rsp',n,s,t,e,a),this.port.postMessage({t:'rsp',src:s,dst:n,action:t,tid:a,res:e})}catch(t){}}).catch((i)=>{try{this.log('Tx','rsp',n,s,t,r,a),this.port.postMessage({t:'rsp',src:s,dst:n,action:t,tid:a,res:{e:i}})}catch(t){}});break;case'rsp':this.log('Rx','rsp',n,s,t,r,a),this.transactions.complete(a,r);break;default:console.error(`ERROR: Invalid message class: ${e}`);}}}}const a=new i,r=a.init,o=a.msg,c=a.get},function(e,t,n){n(10)},function(e,t,n){'use strict';t.a=async function(){const{activeProfiles:e}=await a('activeProfiles'),{options:t}=await a('options'),n={};for(const[s,i]of Object.entries(e))Object.assign(n,t[`${s}_${i}`]);return n};var s=n(6),i=n.n(s);const a=browser.storage.local.get;t.c=a;const r=browser.storage.local.set;t.e=r;const o=browser.storage.local.remove;t.d=o;const c=browser.storage.local.clear;t.b=c},function(e,t){'use strict';t.b=function(e,t){return(e%t+t)%t},t.a=function(e,t){const n={};return t.forEach((t)=>{if(e.hasOwnProperty(t))n[t]=e[t];else throw Error(`object has no attribute ${t}`)}),n}},function(e,t){'use strict';t.a=5e3;t.c=class{constructor(){this.tid=0,this.transactions={},this.new=(e,t,n)=>{const s=++this.tid,i=setTimeout(()=>{delete this.transactions[s],t(`Transaction ${s} timed out.`)},n);return this.transactions[s]={resolve:e,reject:t,timer:i},s},this.complete=(e,t)=>{const n=this.transactions[e];n&&(n.resolve(t),clearTimeout(n.timer),delete this.transactions[e])}}};t.b=class{constructor(){this.actionHandler=(e,t,n)=>{const s=this.actions[e];if(s)return s(t,n);throw Error(`No handler for action ${e}`)},this.initLogging=(e)=>{this.log=e?(e,t,n,s,i,a,r)=>{const o='rsp'===t?'res':'arg',c=r===void 0?'':`:${r}`;console.log(`%c${e}%c[%c${t}%c${c}](${n} -> ${s}) :: %c${i}%c, ${o}=`,`color: ${'Tx'===e?'green':'red'}`,'color: auto',`color: ${'get'===t?'blueviolet':'msg'===t?'blue':'brown'}`,'color: auto','color: teal','color: auto',a)}:()=>{}}}}},function(){'use strict';if('undefined'==typeof browser){window.browser=(()=>{class e extends WeakMap{constructor(e,t=void 0){super(t),this.createItem=e}get(e){return this.has(e)||this.set(e,this.createItem(e)),super.get(e)}}const t=(e)=>e&&'object'==typeof e&&'function'==typeof e.then,n=(e)=>(...t)=>{chrome.runtime.lastError?e.reject(chrome.runtime.lastError):1===t.length?e.resolve(t[0]):e.resolve(t)},s=(e,t)=>{const s=(e)=>1==e?'argument':'arguments';return function(i,...a){if(a.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${s(t.minArgs)} for ${e}(), got ${a.length}`);if(a.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${s(t.maxArgs)} for ${e}(), got ${a.length}`);return new Promise((t,s)=>{i[e](...a,n({resolve:t,reject:s}))})}},i=(e,t,n)=>new Proxy(t,{apply(t,s,i){return n.call(s,e,...i)}});let a=Function.call.bind(Object.prototype.hasOwnProperty);const r=(e,t={},n={})=>{let o=Object.create(null),c={has(e,t){return t in e||t in o},get(e,c){if(c in o)return o[c];if(!(c in e))return;let g=e[c];if('function'==typeof g){if('function'==typeof t[c])g=i(e,e[c],t[c]);else if(a(n,c)){let t=s(c,n[c]);g=i(e,e[c],t)}else g=g.bind(e);}else if('object'==typeof g&&null!==g&&(a(t,c)||a(n,c)))g=r(g,t[c],n[c]);else return Object.defineProperty(o,c,{configurable:!0,enumerable:!0,get(){return e[c]},set(t){e[c]=t}}),g;return o[c]=g,g},set(e,t,n){return t in o?o[t]=n:e[t]=n,!0},defineProperty(e,t,n){return Reflect.defineProperty(o,t,n)},deleteProperty(e,t){return Reflect.deleteProperty(o,t)}};return new Proxy(e,c)},o=new e((e)=>'function'==typeof e?function(n,s,i){let a=e(n,s);return t(a)?(a.then(i,(e)=>{console.error(e),i(e)}),!0):void(void 0!==a&&i(a))}:e),c={runtime:{onMessage:((e)=>({addListener(t,n,...s){t.addListener(e.get(n),...s)},hasListener(t,n){return t.hasListener(e.get(n))},removeListener(t,n){t.removeListener(e.get(n))}}))(o)}};return r(chrome,c,{alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},export:{minArgs:0,maxArgs:0},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},getSubTree:{minArgs:1,maxArgs:1},import:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},setIcon:{minArgs:1,maxArgs:1}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{update:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},downloads:{download:{minArgs:1,maxArgs:1},cancel:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:0,maxArgs:0},setIcon:{minArgs:1,maxArgs:1},show:{minArgs:0,maxArgs:0}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getBrowserInfo:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:1,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{create:{minArgs:1,maxArgs:1},captureVisibleTab:{minArgs:0,maxArgs:2},detectLanguage:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},query:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}})})()}},function(e){e.exports={Backquote:{value:'`',shift:'~'},Backslash:{value:'\\',shift:'|'},BracketLeft:{value:'[',shift:'{'},BracketRight:{value:']',shift:'}'},Comma:{value:',',shift:'<'},Digit0:{value:'0',shift:')'},Digit1:{value:'1',shift:'!'},Digit2:{value:'2',shift:'@'},Digit3:{value:'3',shift:'#'},Digit4:{value:'4',shift:'$'},Digit5:{value:'5',shift:'%'},Digit6:{value:'6',shift:'^'},Digit7:{value:'7',shift:'&'},Digit8:{value:'8',shift:'*'},Digit9:{value:'9',shift:'('},Equal:{value:'=',shift:'+'},IntlBackslash:{value:'\\',shift:'|',international:!0},IntlRo:{value:'\\',shift:'\u308D',international:!0},IntlYen:{value:'\xA5',shift:'\xA5',value2:'\\',shift2:'/',international:!0},KeyA:{value:'a',shift:'A'},KeyB:{value:'b',shift:'B'},KeyC:{value:'c',shift:'C'},KeyD:{value:'d',shift:'D'},KeyE:{value:'e',shift:'E'},KeyF:{value:'f',shift:'F'},KeyG:{value:'g',shift:'G'},KeyH:{value:'h',shift:'H'},KeyI:{value:'i',shift:'I'},KeyJ:{value:'j',shift:'J'},KeyK:{value:'k',shift:'K'},KeyL:{value:'l',shift:'L'},KeyM:{value:'m',shift:'M'},KeyN:{value:'n',shift:'N'},KeyO:{value:'o',shift:'O'},KeyP:{value:'p',shift:'P'},KeyQ:{value:'q',shift:'Q'},KeyR:{value:'r',shift:'R'},KeyS:{value:'s',shift:'S'},KeyT:{value:'t',shift:'T'},KeyU:{value:'u',shift:'U'},KeyV:{value:'v',shift:'V'},KeyW:{value:'w',shift:'W'},KeyX:{value:'x',shift:'X'},KeyY:{value:'y',shift:'Y'},KeyZ:{value:'z',shift:'Z'},Minus:{value:'-',shift:'_'},Period:{value:'.',shift:'>'},Quote:{value:'\'',shift:'"'},Semicolon:{value:';',shift:':'},Slash:{value:'/',shift:'?'},Space:{value:'Space',shift:'Space'},Tab:{value:'Tab',shift:'Tab'},CapsLock:{value:'CapsLock',shift:'CapsLock'},Escape:{value:'Escape',shift:'Escape'},Backspace:{value:'Backspace',shift:'Backspace'},ArrowLeft:{value:'ArrowLeft',shift:'ArrowLeft'},ArrowRight:{value:'ArrowRight',shift:'ArrowRight'},ArrowUp:{value:'ArrowUp',shift:'ArrowUp'},ArrowDown:{value:'ArrowDown',shift:'ArrowDown'},ShiftLeft:{value:'ShiftLeft',shift:'ShiftLeft'},ShiftRight:{value:'ShiftRight',shift:'ShiftRight'},ControlLeft:{value:'ControlLeft',shift:'ControlLeft'},AltLeft:{value:'AltLeft',shift:'AltLeft'},AltRight:{value:'AltRight',shift:'AltRight'},MetaLeft:{value:'MetaLeft',shift:'MetaLeft'},MetaRight:{value:'MetaRight',shift:'MetaRight'}}},function(e,t){'use strict';function n(e,t){const n=encodeURIComponent(e),s=t.lastIndexOf('%s');return 0>s?`${t}${n}`:`${t.slice(0,s)}${n}${t.slice(s+2)}`}function s(e){if(e=e.trim(),-1!==e.indexOf(' '))return!1;if(-1!==e.search(/^(about|file):[^:]/))return!0;const t=(e.match(/^([a-zA-Z-]+:)[^:]/)||[''])[0].slice(0,-1),n=a(t);n&&(e=e.replace(/^[a-zA-Z-]+:\/*/,''));const s=/.*[a-zA-Z].*\//.test(e);if(e=e.replace(/(:[0-9]+)?([#/].*|$)/g,'').split('.'),n&&/^[a-zA-Z0-9@!]+$/.test(e))return!0;if(t&&!n&&'localhost:'!==t)return!1;const r=e.every((t)=>/^[0-9]+$/.test(t)&&0<=+t&&256>+t);return r&&!t&&4===e.length||r&&n||e.every((t)=>/^[a-z0-9-]+$/i.test(t))&&1<e.length&&i(e[e.length-1])||1===e.length&&'localhost'===e[0]||s}function i(e){return-1!==r.indexOf(e)}function a(e){return-1!==o.indexOf(e)}t.a=function(e){try{new URL(e)}catch(t){return!1}return!0},t.b=function(e,t='https://www.google.com/search?q='){return s(e)?(/^[a-zA-Z-]+:/.test(e)?'':'http://')+e:n(e,t)};const r=['abogado','ac','academy','accountants','active','actor','ad','adult','ae','aero','af','ag','agency','ai','airforce','al','allfinanz','alsace','am','amsterdam','an','android','ao','aq','aquarelle','ar','archi','army','arpa','as','asia','associates','at','attorney','au','auction','audio','autos','aw','ax','axa','az','ba','band','bank','bar','barclaycard','barclays','bargains','bayern','bb','bd','be','beer','berlin','best','bf','bg','bh','bi','bid','bike','bio','biz','bj','black','blackfriday','bloomberg','blue','bm','bmw','bn','bnpparibas','bo','boo','boutique','br','brussels','bs','bt','budapest','build','builders','business','buzz','bv','bw','by','bz','bzh','ca','cab','cal','camera','camp','cancerresearch','capetown','capital','caravan','cards','care','career','careers','cartier','casa','cash','cat','catering','cc','cd','center','ceo','cern','cf','cg','ch','channel','cheap','christmas','chrome','church','ci','citic','city','ck','cl','claims','cleaning','click','clinic','clothing','club','cm','cn','co','coach','codes','coffee','college','cologne','com','community','company','computer','condos','construction','consulting','contractors','cooking','cool','coop','country','cr','credit','creditcard','cricket','crs','cruises','cu','cuisinella','cv','cw','cx','cy','cymru','cz','dabur','dad','dance','dating','day','dclk','de','deals','degree','delivery','democrat','dental','dentist','desi','design','dev','diamonds','diet','digital','direct','directory','discount','dj','dk','dm','dnp','do','docs','domains','doosan','durban','dvag','dz','eat','ec','edu','education','ee','eg','email','emerck','energy','engineer','engineering','enterprises','equipment','er','es','esq','estate','et','eu','eurovision','eus','events','everbank','exchange','expert','exposed','fail','farm','fashion','feedback','fi','finance','financial','firmdale','fish','fishing','fit','fitness','fj','fk','flights','florist','flowers','flsmidth','fly','fm','fo','foo','forsale','foundation','fr','frl','frogans','fund','furniture','futbol','ga','gal','gallery','garden','gb','gbiz','gd','ge','gent','gf','gg','ggee','gh','gi','gift','gifts','gives','gl','glass','gle','global','globo','gm','gmail','gmo','gmx','gn','goog','google','gop','gov','gp','gq','gr','graphics','gratis','green','gripe','gs','gt','gu','guide','guitars','guru','gw','gy','hamburg','hangout','haus','healthcare','help','here','hermes','hiphop','hiv','hk','hm','hn','holdings','holiday','homes','horse','host','hosting','house','how','hr','ht','hu','ibm','id','ie','ifm','il','im','immo','immobilien','in','industries','info','ing','ink','institute','insure','int','international','investments','io','iq','ir','irish','is','it','iwc','jcb','je','jetzt','jm','jo','jobs','joburg','jp','juegos','kaufen','kddi','ke','kg','kh','ki','kim','kitchen','kiwi','km','kn','koeln','kp','kr','krd','kred','kw','ky','kyoto','kz','la','lacaixa','land','lat','latrobe','lawyer','lb','lc','lds','lease','legal','lgbt','li','lidl','life','lighting','limited','limo','link','lk','loans','london','lotte','lotto','lr','ls','lt','ltda','lu','luxe','luxury','lv','ly','ma','madrid','maison','management','mango','market','marketing','marriott','mc','md','me','media','meet','melbourne','meme','memorial','menu','mg','mh','miami','mil','mini','mk','ml','mm','mn','mo','mobi','moda','moe','monash','money','mormon','mortgage','moscow','motorcycles','mov','mp','mq','mr','ms','mt','mu','museum','mv','mw','mx','my','mz','na','nagoya','name','navy','nc','ne','net','network','neustar','new','nexus','nf','ng','ngo','nhk','ni','ninja','nl','no','np','nr','nra','nrw','nu','nyc','nz','okinawa','om','one','ong','onl','ooo','org','organic','osaka','otsuka','ovh','pa','paris','partners','parts','party','pe','pf','pg','ph','pharmacy','photo','photography','photos','physio','pics','pictures','pink','pizza','pk','pl','place','plumbing','pm','pn','pohl','poker','porn','post','pr','praxi','press','pro','prod','productions','prof','properties','property','ps','pt','pub','pw','py','qa','qpon','quebec','re','realtor','recipes','red','rehab','reise','reisen','reit','ren','rentals','repair','report','republican','rest','restaurant','reviews','rich','rio','rip','ro','rocks','rodeo','rs','rsvp','ru','ruhr','rw','ryukyu','sa','saarland','sale','samsung','sarl','sb','sc','sca','scb','schmidt','schule','schwarz','science','scot','sd','se','services','sew','sexy','sg','sh','shiksha','shoes','shriram','si','singles','sj','sk','sky','sl','sm','sn','so','social','software','sohu','solar','solutions','soy','space','spiegel','sr','st','su','supplies','supply','support','surf','surgery','suzuki','sv','sx','sy','sydney','systems','sz','taipei','tatar','tattoo','tax','tc','td','technology','tel','temasek','tf','tg','th','tienda','tips','tires','tirol','tj','tk','tl','tm','tn','to','today','tokyo','tools','top','town','toys','tp','tr','trade','training','travel','trust','tt','tui','tv','tw','tz','ua','ug','uk','university','uno','uol','us','uy','uz','va','vacations','vc','ve','vegas','ventures','versicherung','vet','vg','vi','viajes','video','villas','vision','vlaanderen','vn','vodka','vote','voting','voto','voyage','vu','wales','wang','watch','webcam','website','wed','wedding','wf','whoswho','wien','wiki','williamhill','wme','work','works','world','ws','wtc','wtf','xn--1qqw23a','xn--3bst00m','xn--3ds443g','xn--3e0b707e','xn--45brj9c','xn--45q11c','xn--4gbrim','xn--55qw42g','xn--55qx5d','xn--6frz82g','xn--6qq986b3xl','xn--80adxhks','xn--80ao21a','xn--80asehdb','xn--80aswg','xn--90a3ac','xn--b4w605ferd','xn--c1avg','xn--cg4bki','xn--clchc0ea0b2g2a9gcd','xn--czr694b','xn--czrs0t','xn--czru2d','xn--d1acj3b','xn--d1alf','xn--fiq228c5hs','xn--fiq64b','xn--fiqs8s','xn--fiqz9s','xn--flw351e','xn--fpcrj9c3d','xn--fzc2c9e2c','xn--gecrj9c','xn--h2brj9c','xn--hxt814e','xn--i1b6b1a6a2e','xn--io0a7i','xn--j1amh','xn--j6w193g','xn--kprw13d','xn--kpry57d','xn--kput3i','xn--l1acc','xn--lgbbat1ad8j','xn--mgb9awbf','xn--mgba3a4f16a','xn--mgbaam7a8h','xn--mgbab2bd','xn--mgbayh7gpa','xn--mgbbh1a71e','xn--mgbc0a9azcg','xn--mgberp4a5d4ar','xn--mgbx4cd0ab','xn--ngbc5azd','xn--node','xn--nqv7f','xn--nqv7fs00ema','xn--o3cw4h','xn--ogbpf8fl','xn--p1acf','xn--p1ai','xn--pgbs0dh','xn--q9jyb4c','xn--qcka1pmc','xn--rhqv96g','xn--s9brj9c','xn--ses554g','xn--unup4y','xn--vermgensberater-ctb','xn--vermgensberatung-pwb','xn--vhquv','xn--wgbh1c','xn--wgbl6a','xn--xhq521b','xn--xkc2al3hye2a','xn--xkc2dl3a5ee0h','xn--yfro4i67o','xn--ygbi2ammx','xn--zfr164b','xxx','xyz','yachts','yandex','ye','yoga','yokohama','youtube','yt','za','zip','zm','zone','zuerich','zw'],o=['http:','https:','file:','ftp:','chrome:','chrome-extension:']},,,,,function(e,t,n){'use strict';function s(e){return a(i(e))}function i(e){const t=[];for(const[n,s]of Object.entries(e)){if(s===void 0)throw Error(`A profile is missing bindings for command ${n}`);for(const e of s){const s=e.map((e)=>{try{Object(l.g)(e)}catch(t){throw Error(`Invalid KeyboardEvent descriptor for ${n}`)}return Object(l.d)(e)});t.push([s,n,e])}}return t}function a(e){const t={};return e.forEach(([e,n,s])=>{r(t,0,e,n,s)}),t}function r(e,t,n,s){if(0===n.length)throw Error(`${s} has a 0 length key binding`);else if(t===n.length-1){if(e.hasOwnProperty(n[t]))throw{message:`${o(e[n[t]])} and ${s} have conflicting mapping`,type:'conflict',command1:e[n[t]],command2:s};else e[n[t]]=s;}else if(!e.hasOwnProperty(n[t]))r(e[n[t]]={},t+1,n,s);else if('object'==typeof e[n[t]])r(e[n[t]],t+1,n,s);else throw{message:`${e[n[t]]} and ${s} have conflicting prefix`,type:'conflict',command1:e[n[t]],command2:s}}function o(e){return'object'==typeof e?o(e[Object.keys(e)[0]]):e}function c(e,t){const n={};return t.forEach((t)=>{if('keybinding'===t.type){const{mode:i='command',key:s}=t;n[i]?n[i][s]=e[s]:n[i]={[s]:e[s]}}}),n}function g({hintOpacity:e,hintFontFamily:t,hintFontWeight:n,hintHorizontalPadding:s,hintVerticalPadding:i,hintBorderWidth:a,hintFontSize:r,hintTextColor:o,hintBackgroundColor:c,hintBorderColor:g,hintShadow:d,hintBorderRadius:l,hintHorizontalPlacement:m,hintVerticalPlacement:u,hintHorizontalTranslation:p,hintVerticalTranslation:h}){const f=p+('left'===m?0:'right'===m?-100:-50),b=h+('top'===u?0:'bottom'===u?-100:-50);return`all: initial;
position: absolute;
z-index: 2147483647;
opacity: ${e};
font-family: ${t};
font-weight: ${n};
padding: ${i}rem ${s}rem;
border: ${a}px solid;
text-align: center;
text-decoration: none;
text-transform: uppercase;
vertical-align: middle;
font-size: ${r}px;
color: ${o};
background-color: ${c};
border-color: ${g};
${d?'box-shadow: 0 3px 1px -2px rgba(0,0,0,.2), 0 2px 2px 0 rgba(0,0,0,.14), 0 1px 5px 0 rgba(0,0,0,.12);':''}
border-radius: ${l}px;
transform: translate3d(${f}%, ${b}%, 0)`}var d=n(8),l=n(4);t.b=function(e,t){let n={},s={},i={};return Object.entries(m).forEach(([a,r])=>{const{clientOptions:o,backgroundOptions:c,errors:g}=r(e,t[a]);Object.assign(s,o),Object.assign(n,c),Object.assign(i,g)}),{backgroundOptions:n,clientOptions:s,errors:i}};const m={General:(e)=>{const t=Object(d.a)(e,['autoActivateHint']),n=Object(d.a)(e,['enabled','preventStealFocus','hintDetectByCursorStyle','smoothScroll','scrollStep']);return{backgroundOptions:t,clientOptions:n,errors:{}}},Keybindings:(e,t)=>{const n=Object(d.a)(e,['hintChars']),i=Object(d.a)(e,['physicalKeys','ignoreModifierKeys']),a={};2>e.hintChars.length&&(a.hintChars='A minimum of two hint characters must be specified'),Object(l.e)(e.physicalKeys,e.ignoreModifierKeys);const r=c(e,t);return Object.entries(r).forEach(([e,t])=>{try{i[e?`${e}Bindings`:'bindings']=s(t)}catch(t){if('conflict'===t.type)a[t.command1]=t.message,a[t.command2]=t.message;else throw t}}),{backgroundOptions:n,clientOptions:i,errors:a}},Appearance:(e)=>{const t=Object(d.a)(e,['hintFontSize','hintUseTargetSize','hintCSS','hintNormalCharCSS','hintActiveCharCSS','hintHorizontalPlacement','hintVerticalPlacement']);return e.hintUseCustomCSS?t.hintCSS=`all: initial; position: absolute; z-index: 999999999999; ${e.hintCSS}`:(t.hintCSS=g(e),t.hintNormalCharCSS='',t.hintActiveCharCSS='opacity: 0.5'),{backgroundOptions:{},clientOptions:t,errors:{}}},Blacklist:(e)=>{const t=Object(d.a)(e,['blacklist']),n=Object(d.a)(e,['blacklist']);return{backgroundOptions:t,clientOptions:n,errors:{}}}},u=Object.keys(m);t.a=u},,,,,,,,,,,,,,function(e,t,n){'use strict';async function s(){try{await Object(y.e)({ready:!1}),await a(),await r(),!1,await o(),await c(),await g(),await d(),await Object(y.e)({ready:!0})}catch(t){console.error('FATAL ERROR: INSTALLATION FAILED. DELETE THEN REINSTALL THE EXTENSION.',t)}}async function i(){await Object(y.b)(),await s(),Object(v.b)('options_page','RERENDER')}async function a(){await Object(y.e)({categories:w.a})}async function r(){const{categories:e}=await Object(y.c)('categories'),t={};for(const n of e){const e=await fetch(`/config_${n}.json`),s=await e.json();t[n]=s.options}await Object(y.e)({config:t})}async function o(){const{categories:e}=await Object(y.c)('categories'),t={};for(const n of e){const e=await fetch(`/default_${n}.json`),{profiles:s}=await e.json();t[n]=s.map((e)=>e.name)}await Object(y.e)({builtInProfiles:t})}async function c(){const{categories:e}=await Object(y.c)('categories'),t={};for(const n of e)t[n]=[];await Object(y.e)({customProfiles:t})}async function g(){const{categories:e}=await Object(y.c)('categories'),t={};for(const n of e)t[n]='default';await Object(y.e)({activeProfiles:t})}async function d(){const{options:e={}}=await Object(y.c)('options'),{categories:t}=await Object(y.c)('categories');for(const n of t){const t=await fetch(`/default_${n}.json`),{profiles:s}=await t.json();for(const t of s)e[`${n}_${t.name}`]=t.options}await Object(y.e)({options:e})}async function l(){const{categories:e,options:t,builtInProfiles:n}=await Object(y.c)(['categories','options','builtInProfiles']);for(const s of e)for(const e of n[s])delete t[`${s}_${e}`];await Object(y.e)({options:t})}async function m(){await Object(y.d)('builtInProfiles')}async function u(){await Object(y.d)('config')}async function p(){const{categories:e,customProfiles:t,builtInProfiles:n,activeProfiles:s,options:a}=await Object(y.c)(['categories','customProfiles','builtInProfiles','activeProfiles','options']);for(const r of e){const e=n[r];let o=t[r];const c=s[r];o===void 0&&(o=e),o.forEach((t,n)=>{if(-1!==e.indexOf(t)){const e=`${t}_renamed_${Date.now()}`;o[n]=e,c===t&&(s[r]=e),a[`${r}_${e}`]=a[`${r}_${t}`],delete a[`${r}_${t}`]}})}await Object(y.e)({customProfiles:t,activeProfiles:s,options:a})}async function h(){await Object(y.d)('categories')}async function f(){const{categories:e,activeProfiles:t,builtInProfiles:n,customProfiles:s}=await Object(y.c)(['categories','activeProfiles','builtInProfiles','customProfiles']);for(const i of e){s[i]===void 0&&(s[i]=n[i]);const e=[...n[i],...s[i]];-1===e.indexOf(t[i])&&(t[i]='default')}await Object(y.e)({activeProfiles:t})}async function b(){const{config:e,options:t,categories:n,customProfiles:s}=await Object(y.c)(['config','options','categories','customProfiles']);for(const i of n){s[i]===void 0&&(s[i]=[]);for(const n of s[i]){const s=`${i}_${n}`;t[s]=x(t[s],e[i])}}await Object(y.e)({options:t})}function x(e,t){const n={};for(const s of t)n[s.key]=A(e[s.key],s);return n}function A(e,t){return e===void 0?t.default:e}t.b=s,t.d=async function(e){try{await Object(y.e)({ready:!1}),0>=T()(e,'1.16')?(await Object(y.b)(),await s()):(await l(),await m(),await u(),await h(),await a(),await r(),!1,await o(),await p(),await f(),await d(),await b()),await Object(y.e)({ready:!0})}catch(t){console.error('FATAL ERROR: UPDATE FAILED. DELETE THEN REINSTALL THE EXTENSION.',t)}},t.e=async function(){const e=document.createElement('input');e.setAttribute('type','file'),e.setAttribute('accept','.json'),e.addEventListener('change',(t)=>{const e=new FileReader;e.onload=async()=>{await i();const{customProfiles:t,options:n}=await Object(y.c)(['customProfiles','options']),{activeProfiles:s,profiles:a}=JSON.parse(e.result);for(const e in a)for(const s in a[e])t[e].push(s),n[`${e}_${s}`]=a[e][s];await Object(y.e)({customProfiles:t,activeProfiles:s,options:n}),Object(v.b)('options_page','RERENDER')},e.readAsText(t.target.files[0])}),e.click()},t.a=async function(){const{customProfiles:e,activeProfiles:t,options:n}=await Object(y.c)(['customProfiles','activeProfiles','options']),s={};for(const t in e)s[t]={},e[t].forEach((e)=>{s[t][e]=n[`${t}_${e}`]});await Object(k.c)({activeProfiles:t,profiles:s},'saka_key_config.json')},t.c=i;var y=n(7),v=n(5),w=n(17),k=n(3),I=n(32),T=n.n(I)},function(e,t){var n,s,i,a=Math.max;(function(a,r){s=[],n=r,i='function'==typeof n?n.apply(t,s):n,!(i!==void 0&&(e.exports=i))})(this,function(){function e(e,t){return-1===e.indexOf(t)?e.length:e.indexOf(t)}function t(t){var n=t.replace(/^v/,'').replace(/\+.*$/,''),s=e(n,'-'),i=n.substring(0,s).split('.');return i.push(n.substring(s+1)),i}function n(e){return isNaN(+e)?e:+e}function s(e){if('string'!=typeof e)throw new TypeError('Invalid argument expected string');if(!i.test(e))throw new Error('Invalid argument not valid semver (\''+e+'\' received)')}var i=/^v?(?:\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+))?(?:-[\da-z\-]+(?:\.[\da-z\-]+)*)?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i;return function(e,r){[e,r].forEach(s);for(var o=t(e),c=t(r),g=0;g<a(o.length-1,c.length-1);g++){var i=parseInt(o[g]||0,10),d=parseInt(c[g]||0,10);if(i>d)return 1;if(d>i)return-1}var l=o[o.length-1],m=c[c.length-1];if(l&&m){var u=l.split('.').map(n),p=m.split('.').map(n);for(g=0;g<a(u.length,p.length);g++){if(u[g]===void 0||'string'==typeof p[g]&&'number'==typeof u[g])return-1;if(void 0===p[g]||'string'==typeof u[g]&&'number'==typeof p[g])return 1;if(u[g]>p[g])return 1;if(p[g]>u[g])return-1}}else if(l||m)return l?-1:1;return 0}})},,,,,function(e,t,n){'use strict';async function s(){const e=await browser.tabs.query({});for(const t of e)try{browser.tabs.executeScript(t.id,{file:'/content_script_loader.js',allFrames:!0,runAt:'document_start',matchAboutBlank:!0})}catch(t){}}async function i(){if((await Object(J.c)('ready')).ready){const{backgroundOptions:e,clientOptions:t}=Object($.b)((await Object(J.a)()),(await Object(J.c)('config')).config);Object.values(te).forEach((t)=>{t.onOptionsChange(e)}),se=t,G('client','clientOptions',t)}}function a(){chrome.runtime.onInstalled.addListener(async({reason:e,previousVersion:t})=>{switch(!1,e){case'install':await Object(ee.b)(),await i(),await s(),chrome.tabs.create({url:'info.html'});break;case'update':await Object(ee.d)(t),await i(),await s();break;case'chrome_update':case'shared_module_update':default:}})}async function r(){const e=await browser.tabs.query({currentWindow:!0}),t=e.findIndex((e)=>e.active),n=e[Object(ie.b)(t+1,e.length)].id;await browser.tabs.update(n,{active:!0})}async function o(){const e=await browser.tabs.query({currentWindow:!0}),t=e.findIndex((e)=>e.active),n=e[Object(ie.b)(t-1,e.length)].id;await browser.tabs.update(n,{active:!0})}async function c(){const e=await browser.tabs.query({currentWindow:!0}),t=e[0].id;await browser.tabs.update(t,{active:!0})}async function g(){const e=await browser.tabs.query({currentWindow:!0}),t=e[e.length-1].id;await browser.tabs.update(t,{active:!0})}async function d(){const[e]=await browser.tabs.query({currentWindow:!0,active:!0});await browser.tabs.move(e.id,{index:e.index-1})}async function l(){const e=await browser.tabs.query({currentWindow:!0}),t=e.findIndex((e)=>e.active),n=Object(ie.b)(t+1,e.length);await browser.tabs.move(e[t].id,{index:n})}async function m(){const[e]=await browser.tabs.query({currentWindow:!0,active:!0});await browser.tabs.move(e.id,{index:0})}async function u(){const[e]=await browser.tabs.query({currentWindow:!0,active:!0});await browser.tabs.move(e.id,{index:-1})}async function p(){const[e]=await browser.tabs.query({currentWindow:!0,active:!0});await browser.windows.create({tabId:e.id})}async function h(){const[e]=await browser.tabs.query({currentWindow:!0,active:!0});await browser.tabs.remove(e.id)}async function f(){const e=await browser.tabs.query({currentWindow:!0});await Promise.all(e.map(async(e)=>{e.active||(await browser.tabs.remove(e.id))}))}async function b(){const e=await browser.tabs.query({currentWindow:!0}),t=e.findIndex((e)=>e.active);await Promise.all(e.slice(t+1).map(async(e)=>{await browser.tabs.remove(e.id)}))}async function x(){const e=await browser.tabs.query({currentWindow:!0}),t=e.findIndex((e)=>e.active);await Promise.all(e.slice(0,t).map(async(e)=>{await browser.tabs.remove(e.id)}))}async function A(){await browser.tabs.create({})}async function y(){await browser.sessions.restore()}async function v(){const[e]=await browser.tabs.query({currentWindow:!0,active:!0});await browser.tabs.duplicate(e.id)}async function w(){await browser.windows.create()}async function k(){await browser.windows.create({incognito:!0})}async function I(){console.error('switchWindow not implemented')}async function T(){const[e]=await browser.tabs.query({currentWindow:!0,active:!0}),t=await browser.tabs.getZoom();await browser.tabs.setZoom(e.id,Math.min(t+ae/100,3))}async function P(){const[e]=await browser.tabs.query({currentWindow:!0,active:!0}),t=await browser.tabs.getZoom();await browser.tabs.setZoom(e.id,Math.max(t-ae/100,0.3))}async function C(){const[e]=await browser.tabs.query({currentWindow:!0,active:!0});await browser.tabs.setZoom(e.id,0)}async function L(){const[e]=await browser.tabs.query({currentWindow:!0,active:!0});await browser.tabs.reload(e.id)}async function K(){const e=await browser.tabs.query({currentWindow:!0});await Promise.all(e.map(async(e)=>{await browser.tabs.reload(e.id)}))}async function R(){const[e]=await browser.tabs.query({currentWindow:!0,active:!0});await browser.tabs.reload(e.id,{bypassCache:!0})}async function S(){const[e]=await browser.tabs.query({currentWindow:!0,active:!0});await browser.tabs.update(e.id,{muted:!e.mutedInfo.muted})}async function E(){re=!re;const e=await browser.tabs.query({});await Promise.all(e.map(async(e)=>{await browser.tabs.update(e.id,{muted:re})}))}async function O(){const[e]=await browser.tabs.query({currentWindow:!0,active:!0});await browser.tabs.update(e.id,{pinned:!e.pinned})}async function q(){await browser.tabs.update({url:Object(oe.b)(Object(ce.h)())})}async function B(){await browser.tabs.create({url:Object(oe.b)(Object(ce.h)()),active:!1})}async function z(){await browser.tabs.create({url:Object(oe.b)(Object(ce.h)())})}async function j(){await browser.windows.create({url:Object(oe.b)(Object(ce.h)())})}async function _(){await browser.windows.create({url:Object(oe.b)(Object(ce.h)()),incognito:!0})}function D(e,t){const n=[''];let s=0;for(;n.length-s<t||1===n.length;){const t=n[s++];for(const s of e)n.push(t+s)}return n.slice(s,s+t)}Object.defineProperty(t,'__esModule',{value:!0});var M={};n.d(M,'nextTab',function(){return r}),n.d(M,'previousTab',function(){return o}),n.d(M,'firstTab',function(){return c}),n.d(M,'lastTab',function(){return g}),n.d(M,'moveTabLeft',function(){return d}),n.d(M,'moveTabRight',function(){return l}),n.d(M,'moveTabFirst',function(){return m}),n.d(M,'moveTabLast',function(){return u}),n.d(M,'moveTabNewWindow',function(){return p}),n.d(M,'closeTab',function(){return h}),n.d(M,'closeOtherTabs',function(){return f}),n.d(M,'closeRightTabs',function(){return b}),n.d(M,'closeLeftTabs',function(){return x}),n.d(M,'newTab',function(){return A}),n.d(M,'restoreTab',function(){return y}),n.d(M,'duplicateTab',function(){return v}),n.d(M,'newWindow',function(){return w}),n.d(M,'newIncognitoWindow',function(){return k}),n.d(M,'switchWindow',function(){return I}),n.d(M,'zoomIn',function(){return T}),n.d(M,'zoomOut',function(){return P}),n.d(M,'zoomReset',function(){return C}),n.d(M,'refreshTab',function(){return L}),n.d(M,'refreshAllTabs',function(){return K}),n.d(M,'hardRefreshTab',function(){return R}),n.d(M,'toggleMuteTab',function(){return S}),n.d(M,'toggleMuteAllTabs',function(){return E}),n.d(M,'togglePinTab',function(){return O});var W={};n.d(W,'clipboardCurrentTab',function(){return q}),n.d(W,'clipboardBackgroundTab',function(){return B}),n.d(W,'clipboardForegroundTab',function(){return z}),n.d(W,'clipboardNewWindow',function(){return j}),n.d(W,'clipboardIncognitoWindow',function(){return _});var F=n(6),H=n.n(F),N=n(9);class U{constructor(){this.connectionsByPort=new Map,this.connectionsById=new Map,this.nextId=2,this.add=(e,t,n)=>{const s=e.sender;let i;s.tab&&(i=s.tab.id);const a=s.frameId,r=this.nextId++,o=new N.c,c={port:e,id:r,subs:t,onDisconnect:n,tabId:i,frameId:a,transactions:o,sender:s,data:{}};return this.connectionsByPort.set(e,c),this.connectionsById.set(r,c),r},this.remove=(e)=>{const t=this.connectionsByPort.get(e);this.connectionsById.delete(t.id),this.connectionsByPort.delete(e)},this.withTmpConnection=async(e,t)=>{let n;e.tab&&(n=e.tab.id);const s=e.frameId,i=this.nextId++,a=new N.c,r={id:i,subs:[],onDisconnect:[],tabId:n,frameId:s,transactions:a,sender:e,data:{}};this.connectionsById.set(i,r),await t(i),this.connectionsById.delete(i)},this.getByPort=(e)=>this.connectionsByPort.get(e),this.getById=(e)=>this.connectionsById.get(e)}}class Z extends N.b{constructor(){super(),this.connections=new U,this.init=({subscriptions:t=[],onConnect:n=[],onDisconnect:s=[],actions:e,log:i=!1})=>{this.initLogging(i),this.subscriptions=t,this.actions=e,chrome.runtime.onConnect.addListener((e)=>{const{subs:t,onConnect:n,onDisconnect:s}=JSON.parse(e.name),i=this.connections.add(e,t,s);e.onDisconnect.addListener(this.disconnectListener),e.onMessage.addListener(this.messageListener),this.executeOnConnectionActions(i,n)}),this.executeOnConnectionActions(0,n)},this.executeOnConnectionActions=(e,t)=>{t.forEach(({action:t,arg:n,dst:s=0})=>{this._msg(e,s,t,n)})},this.getTargets=(e,t)=>{let n=!1,s=[];if(!('number'==typeof t))'string'==typeof t?(n=this.subscriptions.includes(t),s=this.getStringTargets(e,t)):console.error('ERROR: dst type is invalid');else if(0===t||1===t)n=!0;else{const e=this.connections.getById(t);e?e.closed?console.error('ERROR: attempted to message over closed connection'):s=[e]:console.error('ERROR: attempted to message non-existent client')}return[n,s]},this._msg=(e,t,n,s)=>{const[i,a]=this.getTargets(e,t);i&&this.actionHandler(n,s,e),a.forEach(({port:i})=>{if(i)this.log('Tx','msg',e,t,n,s),i.postMessage({t:'msg',src:e,dst:t,action:n,arg:s});else throw Error('No messaging light-clients')})},this.msg=this._msg.bind(void 0,1),this.getStringTargets=(e,t)=>{return[...this.connections.connectionsById.values()].filter((n)=>{if(n.closed)return!1;for(const s of t.split('|')){const t=s.split('&').map((t)=>{if(n.subs.includes(t))return!0;if('topFrame'===t)return 0===n.frameId;if('childFrames'===t)return 0!==n.frameId;if('otherFrames'===t)return n.frameId!==this.connections.getById(e).frameId;if('thisTab'===t)return n.tabId===this.connections.getById(e).tabId;if('other'===t)return n.id!==this.connections.getById(e).id;const s=t.match(/tab\[(\d+)\]/);if(s)return n.tabId===parseInt(s[1],10);const i=t.match(/frame\[(\d+)\]/);if(i)return n.frameId===parseInt(i[1],10);const a=t.match(/id\[(\d+)\]/);return!!a&&n.id===parseInt(a[1],10)}).every((e)=>e);if(t)return!0}return!1})},this._getLocal=async(e,t,n)=>{try{return{id:1,v:await this.actionHandler(t,n,e)}}catch(e){return{id:1,e:e}}},this._getRemote=(e,t,n,s,i)=>new Promise((a,r)=>{const o=e.transactions.new(a,r,i);if(e.port)this.log('Tx','get',t,e.id,n,s,o),e.port.postMessage({t:'get',src:t,dst:e.id,action:n,arg:s,tid:o});else throw Error('No messaging light-clients')}),this._get=(e,t,n,s,i=N.a)=>{const[a,r]=this.getTargets(e,t),o=a?[this._getLocal(e,n,s)]:[],c=r.map((t)=>this._getRemote(t,e,n,s,i));try{return Promise.all([...o,...c])}catch(t){return console.error(t,'connections: ',this.connections),Promise.resolve([])}},this.get=this._get.bind(void 0,1),this.disconnectListener=(e)=>{const t=this.connections.getByPort(e);t.closed=!0,this.executeOnConnectionActions(t.id,t.onDisconnect),this.connections.remove(e)},this.messageListener=({src:n,dst:s,t:e,action:t,arg:i,tid:a,res:r,timeout:o},c)=>{switch(void 0===n&&(n=this.connections.getByPort(c).id),e){case'msg':this.log('Rx','msg',n,s,t,i),this._msg(n,s,t,i);break;case'get':this.log('Rx','get',n,s,t,i,a),this._get(n,s,t,i,o).then((e)=>{this.log('Tx','rsp',n,s,t,e,a),c.postMessage({t:'rsp',src:s,dst:n,action:t,res:e,tid:a})}).catch((i)=>{this.log('Tx','rsp',n,s,t,{e:i},a),c.postMessage({t:'rsp',src:s,dst:n,action:t,res:{e:i},tid:a})});break;case'rsp':this.log('Rx','rsp',n,s,t,r,a);const g=this.connections.getByPort(c);g&&g.transactions.complete(a,r);break;default:throw Error(`Invalid message class: ${e}`);}},this.meta=(e)=>{const t=this.connections.getById(e);return t?{frameId:t.frameId,tabId:t.tabId,sender:t.sender,subs:t.subs,data:t.data}:void 0},chrome.runtime.onMessage.addListener(({mosi_lw_msg:e,dst:t,action:n,arg:s},i)=>{e&&(this.log('Rx','msg','lw_client',t,n,s),this.connections.withTmpConnection(i,async(e)=>{await this._msg(e,t,n,s)}))})}}const V=new Z,X=V.init,G=V.msg,Q=V.get,Y=V.meta;var J=n(7),$=n(17),ee=n(31);let te={};const ne={onOptionsChange:()=>{},messages:{}};chrome.tabs.onReplaced.addListener((e)=>{!1,browser.tabs.executeScript(e,{file:'/content_script_loader.js',allFrames:!0,runAt:'document_start',matchAboutBlank:!0})});let se;chrome.storage.onChanged.addListener(i);var ie=n(8);let ae=10,re=!1;var oe=n(12),ce=n(3),ge=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var s in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},de={messages:ge({},M,W)},le=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var s in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e};let me='adsfghjkl;',ue=!1;var pe={onOptionsChange:(e)=>{me=2<=e.hintChars.length?e.hintChars:'bad',ue=e.autoActivateHint},messages:le({findHints:async(e,t)=>{const n=`tab[${Y(t).tabId}]|id[${t}]`,s=await Q(n,'findHints',e),i=s.reduce((e,{v:t})=>e+t,0);if(0===i)G(n,'exitHintsMode');else if(1===i&&ue){const{id:e}=s.find(({v:e,id:t})=>1===e),[{v:t}]=await Q(e,'activateFirstHint');G(n,'exitHintsMode',t)}else{const e=D(me,i);let t=0;s.forEach(({id:n,v:s})=>{const i=t+s;G(n,'renderHints',e.slice(t,i)),t=i})}},processKey:async(e,t)=>{const n=`tab[${Y(t).tabId}]|id[${t}]`;try{const t=await Q(n,'advanceHints',e);if(t.every(({v:e})=>'Filtered'===e))return void G(n,'exitHintsMode');const s=t.find(({v:e})=>'Same'!==e&&'Filtered'!==e&&e!==void 0);s&&G(n,'exitHintsMode',s.v)}catch(t){}},openLinkInIncognitoWindow:(e)=>{browser.windows.create({url:e,incognito:!0})}},{})};const he={loadClient:async function(e,t){const{sender:{frameId:n,tab:{index:s,id:i}}}=Y(t);-1===s?!1:(!1,await browser.tabs.executeScript(i,{file:'/content_script.js',frameId:n,runAt:'document_start',matchAboutBlank:!0}))},clientOptions:function(e,t){G(t,'clientOptions',se)}};X({log:!1,actions:he}),function(e,t){te=e,Object.entries(e).map(([e,n])=>{te[e]=Object.assign({},ne,n),Object.assign(t,te[e].messages)})}({Command:de,Hints:pe},he),async function(){await a(),await i()}(),!1}]);
//# sourceMappingURL=background_page.js.map